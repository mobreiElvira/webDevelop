{"ast":null,"code":"import _objectWithoutProperties from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nconst _excluded = [\"focus\"];\nimport * as React from 'react';\nimport { useForm as useRcForm } from '@rc-component/form';\nimport { getDOM } from \"@rc-component/util/es/Dom/findDOMNode\";\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { getFieldId, toArray } from '../util';\nexport function toNamePathStr(name) {\n  const namePath = toArray(name);\n  return namePath.join('_');\n}\nfunction getFieldDOMNode(name, wrapForm) {\n  const field = wrapForm.getFieldInstance(name);\n  const fieldDom = getDOM(field);\n  if (fieldDom) {\n    return fieldDom;\n  }\n  const fieldId = getFieldId(toArray(name), wrapForm.__INTERNAL__.name);\n  if (fieldId) {\n    return document.getElementById(fieldId);\n  }\n}\nexport default function useForm(form) {\n  const [rcForm] = useRcForm();\n  const itemsRef = React.useRef({});\n  const wrapForm = React.useMemo(() => form !== null && form !== void 0 ? form : _objectSpread(_objectSpread({}, rcForm), {}, {\n    __INTERNAL__: {\n      itemRef: name => node => {\n        const namePathStr = toNamePathStr(name);\n        if (node) {\n          itemsRef.current[namePathStr] = node;\n        } else {\n          delete itemsRef.current[namePathStr];\n        }\n      }\n    },\n    scrollToField: function (name) {\n      let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      const {\n          focus\n        } = options,\n        restOpt = _objectWithoutProperties(options, _excluded);\n      const node = getFieldDOMNode(name, wrapForm);\n      if (node) {\n        scrollIntoView(node, _objectSpread({\n          scrollMode: 'if-needed',\n          block: 'nearest'\n        }, restOpt));\n        // Focus if scroll success\n        if (focus) {\n          wrapForm.focusField(name);\n        }\n      }\n    },\n    focusField: name => {\n      const itemRef = wrapForm.getFieldInstance(name);\n      if (typeof (itemRef === null || itemRef === void 0 ? void 0 : itemRef.focus) === 'function') {\n        itemRef.focus();\n      } else {\n        var _getFieldDOMNode, _getFieldDOMNode$focu;\n        (_getFieldDOMNode = getFieldDOMNode(name, wrapForm)) === null || _getFieldDOMNode === void 0 || (_getFieldDOMNode$focu = _getFieldDOMNode.focus) === null || _getFieldDOMNode$focu === void 0 || _getFieldDOMNode$focu.call(_getFieldDOMNode);\n      }\n    },\n    getFieldInstance: name => {\n      const namePathStr = toNamePathStr(name);\n      return itemsRef.current[namePathStr];\n    }\n  }), [form, rcForm]);\n  return [wrapForm];\n}","map":{"version":3,"names":["React","useForm","useRcForm","getDOM","scrollIntoView","getFieldId","toArray","toNamePathStr","name","namePath","join","getFieldDOMNode","wrapForm","field","getFieldInstance","fieldDom","fieldId","__INTERNAL__","document","getElementById","form","rcForm","itemsRef","useRef","useMemo","_objectSpread","itemRef","node","namePathStr","current","scrollToField","options","arguments","length","undefined","focus","restOpt","_objectWithoutProperties","_excluded","scrollMode","block","focusField","_getFieldDOMNode","_getFieldDOMNode$focu","call"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/antd/es/form/hooks/useForm.js"],"sourcesContent":["import * as React from 'react';\nimport { useForm as useRcForm } from '@rc-component/form';\nimport { getDOM } from \"@rc-component/util/es/Dom/findDOMNode\";\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { getFieldId, toArray } from '../util';\nexport function toNamePathStr(name) {\n  const namePath = toArray(name);\n  return namePath.join('_');\n}\nfunction getFieldDOMNode(name, wrapForm) {\n  const field = wrapForm.getFieldInstance(name);\n  const fieldDom = getDOM(field);\n  if (fieldDom) {\n    return fieldDom;\n  }\n  const fieldId = getFieldId(toArray(name), wrapForm.__INTERNAL__.name);\n  if (fieldId) {\n    return document.getElementById(fieldId);\n  }\n}\nexport default function useForm(form) {\n  const [rcForm] = useRcForm();\n  const itemsRef = React.useRef({});\n  const wrapForm = React.useMemo(() => form ?? {\n    ...rcForm,\n    __INTERNAL__: {\n      itemRef: name => node => {\n        const namePathStr = toNamePathStr(name);\n        if (node) {\n          itemsRef.current[namePathStr] = node;\n        } else {\n          delete itemsRef.current[namePathStr];\n        }\n      }\n    },\n    scrollToField: (name, options = {}) => {\n      const {\n        focus,\n        ...restOpt\n      } = options;\n      const node = getFieldDOMNode(name, wrapForm);\n      if (node) {\n        scrollIntoView(node, {\n          scrollMode: 'if-needed',\n          block: 'nearest',\n          ...restOpt\n        });\n        // Focus if scroll success\n        if (focus) {\n          wrapForm.focusField(name);\n        }\n      }\n    },\n    focusField: name => {\n      const itemRef = wrapForm.getFieldInstance(name);\n      if (typeof itemRef?.focus === 'function') {\n        itemRef.focus();\n      } else {\n        getFieldDOMNode(name, wrapForm)?.focus?.();\n      }\n    },\n    getFieldInstance: name => {\n      const namePathStr = toNamePathStr(name);\n      return itemsRef.current[namePathStr];\n    }\n  }, [form, rcForm]);\n  return [wrapForm];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
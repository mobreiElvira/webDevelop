{"ast":null,"code":"import _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport { COMMON_PROPS } from \"../common\";\n/**\n * Merge props provided `items` or context collected images\n */\nexport default function usePreviewItems(items) {\n  // Context collection image data\n  const [images, setImages] = React.useState({});\n  const registerImage = React.useCallback((id, data) => {\n    setImages(imgs => _objectSpread(_objectSpread({}, imgs), {}, {\n      [id]: data\n    }));\n    return () => {\n      setImages(imgs => {\n        const cloneImgs = _objectSpread({}, imgs);\n        delete cloneImgs[id];\n        return cloneImgs;\n      });\n    };\n  }, []);\n\n  // items\n  const mergedItems = React.useMemo(() => {\n    // use `items` first\n    if (items) {\n      return items.map(item => {\n        if (typeof item === 'string') {\n          return {\n            data: {\n              src: item\n            }\n          };\n        }\n        const data = {};\n        Object.keys(item).forEach(key => {\n          if (['src', ...COMMON_PROPS].includes(key)) {\n            data[key] = item[key];\n          }\n        });\n        return {\n          data\n        };\n      });\n    }\n\n    // use registered images secondly\n    return Object.keys(images).reduce((total, id) => {\n      const {\n        canPreview,\n        data\n      } = images[id];\n      if (canPreview) {\n        total.push({\n          data,\n          id\n        });\n      }\n      return total;\n    }, []);\n  }, [items, images]);\n  return [mergedItems, registerImage, !!items];\n}","map":{"version":3,"names":["React","COMMON_PROPS","usePreviewItems","items","images","setImages","useState","registerImage","useCallback","id","data","imgs","_objectSpread","cloneImgs","mergedItems","useMemo","map","item","src","Object","keys","forEach","key","includes","reduce","total","canPreview","push"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/image/es/hooks/usePreviewItems.js"],"sourcesContent":["import * as React from 'react';\nimport { COMMON_PROPS } from \"../common\";\n/**\n * Merge props provided `items` or context collected images\n */\nexport default function usePreviewItems(items) {\n  // Context collection image data\n  const [images, setImages] = React.useState({});\n  const registerImage = React.useCallback((id, data) => {\n    setImages(imgs => ({\n      ...imgs,\n      [id]: data\n    }));\n    return () => {\n      setImages(imgs => {\n        const cloneImgs = {\n          ...imgs\n        };\n        delete cloneImgs[id];\n        return cloneImgs;\n      });\n    };\n  }, []);\n\n  // items\n  const mergedItems = React.useMemo(() => {\n    // use `items` first\n    if (items) {\n      return items.map(item => {\n        if (typeof item === 'string') {\n          return {\n            data: {\n              src: item\n            }\n          };\n        }\n        const data = {};\n        Object.keys(item).forEach(key => {\n          if (['src', ...COMMON_PROPS].includes(key)) {\n            data[key] = item[key];\n          }\n        });\n        return {\n          data\n        };\n      });\n    }\n\n    // use registered images secondly\n    return Object.keys(images).reduce((total, id) => {\n      const {\n        canPreview,\n        data\n      } = images[id];\n      if (canPreview) {\n        total.push({\n          data,\n          id\n        });\n      }\n      return total;\n    }, []);\n  }, [items, images]);\n  return [mergedItems, registerImage, !!items];\n}"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,YAAY,QAAQ,WAAW;AACxC;AACA;AACA;AACA,eAAe,SAASC,eAAeA,CAACC,KAAK,EAAE;EAC7C;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGL,KAAK,CAACM,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAMC,aAAa,GAAGP,KAAK,CAACQ,WAAW,CAAC,CAACC,EAAE,EAAEC,IAAI,KAAK;IACpDL,SAAS,CAACM,IAAI,IAAAC,aAAA,CAAAA,aAAA,KACTD,IAAI;MACP,CAACF,EAAE,GAAGC;IAAI,EACV,CAAC;IACH,OAAO,MAAM;MACXL,SAAS,CAACM,IAAI,IAAI;QAChB,MAAME,SAAS,GAAAD,aAAA,KACVD,IAAI,CACR;QACD,OAAOE,SAAS,CAACJ,EAAE,CAAC;QACpB,OAAOI,SAAS;MAClB,CAAC,CAAC;IACJ,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMC,WAAW,GAAGd,KAAK,CAACe,OAAO,CAAC,MAAM;IACtC;IACA,IAAIZ,KAAK,EAAE;MACT,OAAOA,KAAK,CAACa,GAAG,CAACC,IAAI,IAAI;QACvB,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;UAC5B,OAAO;YACLP,IAAI,EAAE;cACJQ,GAAG,EAAED;YACP;UACF,CAAC;QACH;QACA,MAAMP,IAAI,GAAG,CAAC,CAAC;QACfS,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,OAAO,CAACC,GAAG,IAAI;UAC/B,IAAI,CAAC,KAAK,EAAE,GAAGrB,YAAY,CAAC,CAACsB,QAAQ,CAACD,GAAG,CAAC,EAAE;YAC1CZ,IAAI,CAACY,GAAG,CAAC,GAAGL,IAAI,CAACK,GAAG,CAAC;UACvB;QACF,CAAC,CAAC;QACF,OAAO;UACLZ;QACF,CAAC;MACH,CAAC,CAAC;IACJ;;IAEA;IACA,OAAOS,MAAM,CAACC,IAAI,CAAChB,MAAM,CAAC,CAACoB,MAAM,CAAC,CAACC,KAAK,EAAEhB,EAAE,KAAK;MAC/C,MAAM;QACJiB,UAAU;QACVhB;MACF,CAAC,GAAGN,MAAM,CAACK,EAAE,CAAC;MACd,IAAIiB,UAAU,EAAE;QACdD,KAAK,CAACE,IAAI,CAAC;UACTjB,IAAI;UACJD;QACF,CAAC,CAAC;MACJ;MACA,OAAOgB,KAAK;IACd,CAAC,EAAE,EAAE,CAAC;EACR,CAAC,EAAE,CAACtB,KAAK,EAAEC,MAAM,CAAC,CAAC;EACnB,OAAO,CAACU,WAAW,EAAEP,aAAa,EAAE,CAAC,CAACJ,KAAK,CAAC;AAC9C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
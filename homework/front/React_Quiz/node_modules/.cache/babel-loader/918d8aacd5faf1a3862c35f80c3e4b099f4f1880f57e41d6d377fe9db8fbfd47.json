{"ast":null,"code":"import _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport warning from \"@rc-component/util/es/warning\";\nimport FieldContext from \"./FieldContext\";\nimport Field from \"./Field\";\nimport { move, getNamePath } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nfunction List(_ref) {\n  let {\n    name,\n    initialValue,\n    children,\n    rules,\n    validateTrigger,\n    isListField\n  } = _ref;\n  const context = React.useContext(FieldContext);\n  const wrapperListContext = React.useContext(ListContext);\n  const keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  const keyManager = keyRef.current;\n  const prefixName = React.useMemo(() => {\n    const parentPrefixName = getNamePath(context.prefixName) || [];\n    return [...parentPrefixName, ...getNamePath(name)];\n  }, [context.prefixName, name]);\n  const fieldContext = React.useMemo(() => _objectSpread(_objectSpread({}, context), {}, {\n    prefixName\n  }), [context, prefixName]);\n\n  // List context\n  const listContext = React.useMemo(() => ({\n    getKey: namePath => {\n      const len = prefixName.length;\n      const pathName = namePath[len];\n      return [keyManager.keys[pathName], namePath.slice(len + 1)];\n    }\n  }), [keyManager, prefixName]);\n\n  // User should not pass `children` as other type.\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n  const shouldUpdate = (prevValue, nextValue, _ref2) => {\n    let {\n      source\n    } = _ref2;\n    if (source === 'internal') {\n      return false;\n    }\n    return prevValue !== nextValue;\n  };\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: fieldContext\n  }, /*#__PURE__*/React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate,\n    rules: rules,\n    validateTrigger: validateTrigger,\n    initialValue: initialValue,\n    isList: true,\n    isListField: isListField !== null && isListField !== void 0 ? isListField : !!wrapperListContext\n  }, (_ref3, meta) => {\n    let {\n      value = [],\n      onChange\n    } = _ref3;\n    const {\n      getFieldValue\n    } = context;\n    const getNewValue = () => {\n      const values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n    const operations = {\n      add: (defaultValue, index) => {\n        // Mapping keys\n        const newValue = getNewValue();\n        if (index >= 0 && index <= newValue.length) {\n          keyManager.keys = [...keyManager.keys.slice(0, index), keyManager.id, ...keyManager.keys.slice(index)];\n          onChange([...newValue.slice(0, index), defaultValue, ...newValue.slice(index)]);\n        } else {\n          if (process.env.NODE_ENV !== 'production' && (index < 0 || index > newValue.length)) {\n            warning(false, 'The second parameter of the add function should be a valid positive number.');\n          }\n          keyManager.keys = [...keyManager.keys, keyManager.id];\n          onChange([...newValue, defaultValue]);\n        }\n        keyManager.id += 1;\n      },\n      remove: index => {\n        const newValue = getNewValue();\n        const indexSet = new Set(Array.isArray(index) ? index : [index]);\n        if (indexSet.size <= 0) {\n          return;\n        }\n        keyManager.keys = keyManager.keys.filter((_, keysIndex) => !indexSet.has(keysIndex));\n\n        // Trigger store change\n        onChange(newValue.filter((_, valueIndex) => !indexSet.has(valueIndex)));\n      },\n      move(from, to) {\n        if (from === to) {\n          return;\n        }\n        const newValue = getNewValue();\n\n        // Do not handle out of range\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n        keyManager.keys = move(keyManager.keys, from, to);\n\n        // Trigger store change\n        onChange(move(newValue, from, to));\n      }\n    };\n    let listValue = value || [];\n    if (!Array.isArray(listValue)) {\n      listValue = [];\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, \"Current value of '\".concat(prefixName.join(' > '), \"' is not an array type.\"));\n      }\n    }\n    return children(listValue.map((__, index) => {\n      let key = keyManager.keys[index];\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n      return {\n        name: index,\n        key,\n        isListField: true\n      };\n    }), operations, meta);\n  })));\n}\nexport default List;","map":{"version":3,"names":["React","warning","FieldContext","Field","move","getNamePath","ListContext","List","_ref","name","initialValue","children","rules","validateTrigger","isListField","context","useContext","wrapperListContext","keyRef","useRef","keys","id","keyManager","current","prefixName","useMemo","parentPrefixName","fieldContext","_objectSpread","listContext","getKey","namePath","len","length","pathName","slice","shouldUpdate","prevValue","nextValue","_ref2","source","createElement","Provider","value","isList","_ref3","meta","onChange","getFieldValue","getNewValue","values","operations","add","defaultValue","index","newValue","process","env","NODE_ENV","remove","indexSet","Set","Array","isArray","size","filter","_","keysIndex","has","valueIndex","from","to","listValue","concat","join","map","__","key","undefined"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/form/es/List.js"],"sourcesContent":["import * as React from 'react';\nimport warning from \"@rc-component/util/es/warning\";\nimport FieldContext from \"./FieldContext\";\nimport Field from \"./Field\";\nimport { move, getNamePath } from \"./utils/valueUtil\";\nimport ListContext from \"./ListContext\";\nfunction List({\n  name,\n  initialValue,\n  children,\n  rules,\n  validateTrigger,\n  isListField\n}) {\n  const context = React.useContext(FieldContext);\n  const wrapperListContext = React.useContext(ListContext);\n  const keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  const keyManager = keyRef.current;\n  const prefixName = React.useMemo(() => {\n    const parentPrefixName = getNamePath(context.prefixName) || [];\n    return [...parentPrefixName, ...getNamePath(name)];\n  }, [context.prefixName, name]);\n  const fieldContext = React.useMemo(() => ({\n    ...context,\n    prefixName\n  }), [context, prefixName]);\n\n  // List context\n  const listContext = React.useMemo(() => ({\n    getKey: namePath => {\n      const len = prefixName.length;\n      const pathName = namePath[len];\n      return [keyManager.keys[pathName], namePath.slice(len + 1)];\n    }\n  }), [keyManager, prefixName]);\n\n  // User should not pass `children` as other type.\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n  const shouldUpdate = (prevValue, nextValue, {\n    source\n  }) => {\n    if (source === 'internal') {\n      return false;\n    }\n    return prevValue !== nextValue;\n  };\n  return /*#__PURE__*/React.createElement(ListContext.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(FieldContext.Provider, {\n    value: fieldContext\n  }, /*#__PURE__*/React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate,\n    rules: rules,\n    validateTrigger: validateTrigger,\n    initialValue: initialValue,\n    isList: true,\n    isListField: isListField ?? !!wrapperListContext\n  }, ({\n    value = [],\n    onChange\n  }, meta) => {\n    const {\n      getFieldValue\n    } = context;\n    const getNewValue = () => {\n      const values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n    const operations = {\n      add: (defaultValue, index) => {\n        // Mapping keys\n        const newValue = getNewValue();\n        if (index >= 0 && index <= newValue.length) {\n          keyManager.keys = [...keyManager.keys.slice(0, index), keyManager.id, ...keyManager.keys.slice(index)];\n          onChange([...newValue.slice(0, index), defaultValue, ...newValue.slice(index)]);\n        } else {\n          if (process.env.NODE_ENV !== 'production' && (index < 0 || index > newValue.length)) {\n            warning(false, 'The second parameter of the add function should be a valid positive number.');\n          }\n          keyManager.keys = [...keyManager.keys, keyManager.id];\n          onChange([...newValue, defaultValue]);\n        }\n        keyManager.id += 1;\n      },\n      remove: index => {\n        const newValue = getNewValue();\n        const indexSet = new Set(Array.isArray(index) ? index : [index]);\n        if (indexSet.size <= 0) {\n          return;\n        }\n        keyManager.keys = keyManager.keys.filter((_, keysIndex) => !indexSet.has(keysIndex));\n\n        // Trigger store change\n        onChange(newValue.filter((_, valueIndex) => !indexSet.has(valueIndex)));\n      },\n      move(from, to) {\n        if (from === to) {\n          return;\n        }\n        const newValue = getNewValue();\n\n        // Do not handle out of range\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n        keyManager.keys = move(keyManager.keys, from, to);\n\n        // Trigger store change\n        onChange(move(newValue, from, to));\n      }\n    };\n    let listValue = value || [];\n    if (!Array.isArray(listValue)) {\n      listValue = [];\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, `Current value of '${prefixName.join(' > ')}' is not an array type.`);\n      }\n    }\n    return children(listValue.map((__, index) => {\n      let key = keyManager.keys[index];\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n      return {\n        name: index,\n        key,\n        isListField: true\n      };\n    }), operations, meta);\n  })));\n}\nexport default List;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
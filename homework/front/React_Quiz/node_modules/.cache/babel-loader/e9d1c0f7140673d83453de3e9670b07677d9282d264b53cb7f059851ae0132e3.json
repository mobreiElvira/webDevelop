{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport { useControlledState, useEvent } from '@rc-component/util';\nconst EMPTY_KEYS = [];\nfunction filterKeys(keys, dataKeys) {\n  const filteredKeys = keys.filter(key => dataKeys.has(key));\n  return keys.length === filteredKeys.length ? keys : filteredKeys;\n}\nfunction flattenKeys(keys) {\n  return Array.from(keys).join(';');\n}\nfunction useSelection(leftDataSource, rightDataSource, selectedKeys) {\n  // Prepare `dataSource` keys\n  const [leftKeys, rightKeys] = React.useMemo(() => [new Set(leftDataSource.map(src => src === null || src === void 0 ? void 0 : src.key)), new Set(rightDataSource.map(src => src === null || src === void 0 ? void 0 : src.key))], [leftDataSource, rightDataSource]);\n  // Selected Keys\n  const [mergedSelectedKeys, setMergedSelectedKeys] = useControlledState(EMPTY_KEYS, selectedKeys);\n  const sourceSelectedKeys = React.useMemo(() => filterKeys(mergedSelectedKeys, leftKeys), [mergedSelectedKeys, leftKeys]);\n  const targetSelectedKeys = React.useMemo(() => filterKeys(mergedSelectedKeys, rightKeys), [mergedSelectedKeys, rightKeys]);\n  // // Reset when data changed\n  React.useEffect(() => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(filterKeys(mergedSelectedKeys, leftKeys)), _toConsumableArray(filterKeys(mergedSelectedKeys, rightKeys))));\n  }, [flattenKeys(leftKeys), flattenKeys(rightKeys)]);\n  // Update keys\n  const setSourceSelectedKeys = useEvent(nextSrcKeys => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(nextSrcKeys), _toConsumableArray(targetSelectedKeys)));\n  });\n  const setTargetSelectedKeys = useEvent(nextTargetKeys => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(sourceSelectedKeys), _toConsumableArray(nextTargetKeys)));\n  });\n  return [\n  // Keys\n  sourceSelectedKeys, targetSelectedKeys,\n  // Updater\n  setSourceSelectedKeys, setTargetSelectedKeys];\n}\nexport default useSelection;","map":{"version":3,"names":["_toConsumableArray","React","useControlledState","useEvent","EMPTY_KEYS","filterKeys","keys","dataKeys","filteredKeys","filter","key","has","length","flattenKeys","Array","from","join","useSelection","leftDataSource","rightDataSource","selectedKeys","leftKeys","rightKeys","useMemo","Set","map","src","mergedSelectedKeys","setMergedSelectedKeys","sourceSelectedKeys","targetSelectedKeys","useEffect","concat","setSourceSelectedKeys","nextSrcKeys","setTargetSelectedKeys","nextTargetKeys"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/antd/es/transfer/hooks/useSelection.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport { useControlledState, useEvent } from '@rc-component/util';\nconst EMPTY_KEYS = [];\nfunction filterKeys(keys, dataKeys) {\n  const filteredKeys = keys.filter(key => dataKeys.has(key));\n  return keys.length === filteredKeys.length ? keys : filteredKeys;\n}\nfunction flattenKeys(keys) {\n  return Array.from(keys).join(';');\n}\nfunction useSelection(leftDataSource, rightDataSource, selectedKeys) {\n  // Prepare `dataSource` keys\n  const [leftKeys, rightKeys] = React.useMemo(() => [new Set(leftDataSource.map(src => src?.key)), new Set(rightDataSource.map(src => src?.key))], [leftDataSource, rightDataSource]);\n  // Selected Keys\n  const [mergedSelectedKeys, setMergedSelectedKeys] = useControlledState(EMPTY_KEYS, selectedKeys);\n  const sourceSelectedKeys = React.useMemo(() => filterKeys(mergedSelectedKeys, leftKeys), [mergedSelectedKeys, leftKeys]);\n  const targetSelectedKeys = React.useMemo(() => filterKeys(mergedSelectedKeys, rightKeys), [mergedSelectedKeys, rightKeys]);\n  // // Reset when data changed\n  React.useEffect(() => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(filterKeys(mergedSelectedKeys, leftKeys)), _toConsumableArray(filterKeys(mergedSelectedKeys, rightKeys))));\n  }, [flattenKeys(leftKeys), flattenKeys(rightKeys)]);\n  // Update keys\n  const setSourceSelectedKeys = useEvent(nextSrcKeys => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(nextSrcKeys), _toConsumableArray(targetSelectedKeys)));\n  });\n  const setTargetSelectedKeys = useEvent(nextTargetKeys => {\n    setMergedSelectedKeys([].concat(_toConsumableArray(sourceSelectedKeys), _toConsumableArray(nextTargetKeys)));\n  });\n  return [\n  // Keys\n  sourceSelectedKeys, targetSelectedKeys,\n  // Updater\n  setSourceSelectedKeys, setTargetSelectedKeys];\n}\nexport default useSelection;"],"mappings":"AAAA,OAAOA,kBAAkB,MAAM,8CAA8C;AAC7E,OAAO,KAAKC,KAAK,MAAM,OAAO;AAC9B,SAASC,kBAAkB,EAAEC,QAAQ,QAAQ,oBAAoB;AACjE,MAAMC,UAAU,GAAG,EAAE;AACrB,SAASC,UAAUA,CAACC,IAAI,EAAEC,QAAQ,EAAE;EAClC,MAAMC,YAAY,GAAGF,IAAI,CAACG,MAAM,CAACC,GAAG,IAAIH,QAAQ,CAACI,GAAG,CAACD,GAAG,CAAC,CAAC;EAC1D,OAAOJ,IAAI,CAACM,MAAM,KAAKJ,YAAY,CAACI,MAAM,GAAGN,IAAI,GAAGE,YAAY;AAClE;AACA,SAASK,WAAWA,CAACP,IAAI,EAAE;EACzB,OAAOQ,KAAK,CAACC,IAAI,CAACT,IAAI,CAAC,CAACU,IAAI,CAAC,GAAG,CAAC;AACnC;AACA,SAASC,YAAYA,CAACC,cAAc,EAAEC,eAAe,EAAEC,YAAY,EAAE;EACnE;EACA,MAAM,CAACC,QAAQ,EAAEC,SAAS,CAAC,GAAGrB,KAAK,CAACsB,OAAO,CAAC,MAAM,CAAC,IAAIC,GAAG,CAACN,cAAc,CAACO,GAAG,CAACC,GAAG,IAAIA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEhB,GAAG,CAAC,CAAC,EAAE,IAAIc,GAAG,CAACL,eAAe,CAACM,GAAG,CAACC,GAAG,IAAIA,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEhB,GAAG,CAAC,CAAC,CAAC,EAAE,CAACQ,cAAc,EAAEC,eAAe,CAAC,CAAC;EACnL;EACA,MAAM,CAACQ,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1B,kBAAkB,CAACE,UAAU,EAAEgB,YAAY,CAAC;EAChG,MAAMS,kBAAkB,GAAG5B,KAAK,CAACsB,OAAO,CAAC,MAAMlB,UAAU,CAACsB,kBAAkB,EAAEN,QAAQ,CAAC,EAAE,CAACM,kBAAkB,EAAEN,QAAQ,CAAC,CAAC;EACxH,MAAMS,kBAAkB,GAAG7B,KAAK,CAACsB,OAAO,CAAC,MAAMlB,UAAU,CAACsB,kBAAkB,EAAEL,SAAS,CAAC,EAAE,CAACK,kBAAkB,EAAEL,SAAS,CAAC,CAAC;EAC1H;EACArB,KAAK,CAAC8B,SAAS,CAAC,MAAM;IACpBH,qBAAqB,CAAC,EAAE,CAACI,MAAM,CAAChC,kBAAkB,CAACK,UAAU,CAACsB,kBAAkB,EAAEN,QAAQ,CAAC,CAAC,EAAErB,kBAAkB,CAACK,UAAU,CAACsB,kBAAkB,EAAEL,SAAS,CAAC,CAAC,CAAC,CAAC;EAC/J,CAAC,EAAE,CAACT,WAAW,CAACQ,QAAQ,CAAC,EAAER,WAAW,CAACS,SAAS,CAAC,CAAC,CAAC;EACnD;EACA,MAAMW,qBAAqB,GAAG9B,QAAQ,CAAC+B,WAAW,IAAI;IACpDN,qBAAqB,CAAC,EAAE,CAACI,MAAM,CAAChC,kBAAkB,CAACkC,WAAW,CAAC,EAAElC,kBAAkB,CAAC8B,kBAAkB,CAAC,CAAC,CAAC;EAC3G,CAAC,CAAC;EACF,MAAMK,qBAAqB,GAAGhC,QAAQ,CAACiC,cAAc,IAAI;IACvDR,qBAAqB,CAAC,EAAE,CAACI,MAAM,CAAChC,kBAAkB,CAAC6B,kBAAkB,CAAC,EAAE7B,kBAAkB,CAACoC,cAAc,CAAC,CAAC,CAAC;EAC9G,CAAC,CAAC;EACF,OAAO;EACP;EACAP,kBAAkB,EAAEC,kBAAkB;EACtC;EACAG,qBAAqB,EAAEE,qBAAqB,CAAC;AAC/C;AACA,eAAelB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
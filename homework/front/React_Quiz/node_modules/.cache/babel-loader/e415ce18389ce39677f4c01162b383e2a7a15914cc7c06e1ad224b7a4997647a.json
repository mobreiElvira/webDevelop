{"ast":null,"code":"/* eslint-disable react/no-unknown-property */\nimport raf from \"@rc-component/util/es/raf\";\nimport { clsx } from 'clsx';\nimport * as React from 'react';\n\n/**\n * When click and hold on a button - the speed of auto changing the value.\n */\nconst STEP_INTERVAL = 200;\n\n/**\n * When click and hold on a button - the delay before auto changing the value.\n */\nconst STEP_DELAY = 600;\nexport default function StepHandler(_ref) {\n  let {\n    prefixCls,\n    action,\n    children,\n    disabled,\n    className,\n    style,\n    onStep\n  } = _ref;\n  // ======================== MISC ========================\n  const isUpAction = action === 'up';\n\n  // ======================== Step ========================\n  const stepTimeoutRef = React.useRef();\n  const frameIds = React.useRef([]);\n  const onStopStep = () => {\n    clearTimeout(stepTimeoutRef.current);\n  };\n\n  // We will interval update step when hold mouse down\n  const onStepMouseDown = e => {\n    e.preventDefault();\n    onStopStep();\n    onStep(isUpAction, 'handler');\n\n    // Loop step for interval\n    function loopStep() {\n      onStep(isUpAction, 'handler');\n      stepTimeoutRef.current = setTimeout(loopStep, STEP_INTERVAL);\n    }\n\n    // First time press will wait some time to trigger loop step update\n    stepTimeoutRef.current = setTimeout(loopStep, STEP_DELAY);\n  };\n  React.useEffect(() => () => {\n    onStopStep();\n    frameIds.current.forEach(id => {\n      raf.cancel(id);\n    });\n  }, []);\n\n  // ======================= Render =======================\n  const actionClassName = \"\".concat(prefixCls, \"-action\");\n  const mergedClassName = clsx(actionClassName, \"\".concat(actionClassName, \"-\").concat(action), {\n    [\"\".concat(actionClassName, \"-\").concat(action, \"-disabled\")]: disabled\n  }, className);\n\n  // fix: https://github.com/ant-design/ant-design/issues/43088\n  // In Safari, When we fire onmousedown and onmouseup events in quick succession,\n  // there may be a problem that the onmouseup events are executed first,\n  // resulting in a disordered program execution.\n  // So, we need to use requestAnimationFrame to ensure that the onmouseup event is executed after the onmousedown event.\n  const safeOnStopStep = () => frameIds.current.push(raf(onStopStep));\n  return /*#__PURE__*/React.createElement(\"span\", {\n    unselectable: \"on\",\n    role: \"button\",\n    onMouseUp: safeOnStopStep,\n    onMouseLeave: safeOnStopStep,\n    onMouseDown: e => {\n      onStepMouseDown(e);\n    },\n    \"aria-label\": isUpAction ? 'Increase Value' : 'Decrease Value',\n    \"aria-disabled\": disabled,\n    className: mergedClassName,\n    style: style\n  }, children || /*#__PURE__*/React.createElement(\"span\", {\n    unselectable: \"on\",\n    className: \"\".concat(prefixCls, \"-action-\").concat(action, \"-inner\")\n  }));\n}","map":{"version":3,"names":["raf","clsx","React","STEP_INTERVAL","STEP_DELAY","StepHandler","_ref","prefixCls","action","children","disabled","className","style","onStep","isUpAction","stepTimeoutRef","useRef","frameIds","onStopStep","clearTimeout","current","onStepMouseDown","e","preventDefault","loopStep","setTimeout","useEffect","forEach","id","cancel","actionClassName","concat","mergedClassName","safeOnStopStep","push","createElement","unselectable","role","onMouseUp","onMouseLeave","onMouseDown"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/input-number/es/StepHandler.js"],"sourcesContent":["/* eslint-disable react/no-unknown-property */\nimport raf from \"@rc-component/util/es/raf\";\nimport { clsx } from 'clsx';\nimport * as React from 'react';\n\n/**\n * When click and hold on a button - the speed of auto changing the value.\n */\nconst STEP_INTERVAL = 200;\n\n/**\n * When click and hold on a button - the delay before auto changing the value.\n */\nconst STEP_DELAY = 600;\nexport default function StepHandler({\n  prefixCls,\n  action,\n  children,\n  disabled,\n  className,\n  style,\n  onStep\n}) {\n  // ======================== MISC ========================\n  const isUpAction = action === 'up';\n\n  // ======================== Step ========================\n  const stepTimeoutRef = React.useRef();\n  const frameIds = React.useRef([]);\n  const onStopStep = () => {\n    clearTimeout(stepTimeoutRef.current);\n  };\n\n  // We will interval update step when hold mouse down\n  const onStepMouseDown = e => {\n    e.preventDefault();\n    onStopStep();\n    onStep(isUpAction, 'handler');\n\n    // Loop step for interval\n    function loopStep() {\n      onStep(isUpAction, 'handler');\n      stepTimeoutRef.current = setTimeout(loopStep, STEP_INTERVAL);\n    }\n\n    // First time press will wait some time to trigger loop step update\n    stepTimeoutRef.current = setTimeout(loopStep, STEP_DELAY);\n  };\n  React.useEffect(() => () => {\n    onStopStep();\n    frameIds.current.forEach(id => {\n      raf.cancel(id);\n    });\n  }, []);\n\n  // ======================= Render =======================\n  const actionClassName = `${prefixCls}-action`;\n  const mergedClassName = clsx(actionClassName, `${actionClassName}-${action}`, {\n    [`${actionClassName}-${action}-disabled`]: disabled\n  }, className);\n\n  // fix: https://github.com/ant-design/ant-design/issues/43088\n  // In Safari, When we fire onmousedown and onmouseup events in quick succession,\n  // there may be a problem that the onmouseup events are executed first,\n  // resulting in a disordered program execution.\n  // So, we need to use requestAnimationFrame to ensure that the onmouseup event is executed after the onmousedown event.\n  const safeOnStopStep = () => frameIds.current.push(raf(onStopStep));\n  return /*#__PURE__*/React.createElement(\"span\", {\n    unselectable: \"on\",\n    role: \"button\",\n    onMouseUp: safeOnStopStep,\n    onMouseLeave: safeOnStopStep,\n    onMouseDown: e => {\n      onStepMouseDown(e);\n    },\n    \"aria-label\": isUpAction ? 'Increase Value' : 'Decrease Value',\n    \"aria-disabled\": disabled,\n    className: mergedClassName,\n    style: style\n  }, children || /*#__PURE__*/React.createElement(\"span\", {\n    unselectable: \"on\",\n    className: `${prefixCls}-action-${action}-inner`\n  }));\n}"],"mappings":"AAAA;AACA,OAAOA,GAAG,MAAM,2BAA2B;AAC3C,SAASC,IAAI,QAAQ,MAAM;AAC3B,OAAO,KAAKC,KAAK,MAAM,OAAO;;AAE9B;AACA;AACA;AACA,MAAMC,aAAa,GAAG,GAAG;;AAEzB;AACA;AACA;AACA,MAAMC,UAAU,GAAG,GAAG;AACtB,eAAe,SAASC,WAAWA,CAAAC,IAAA,EAQhC;EAAA,IARiC;IAClCC,SAAS;IACTC,MAAM;IACNC,QAAQ;IACRC,QAAQ;IACRC,SAAS;IACTC,KAAK;IACLC;EACF,CAAC,GAAAP,IAAA;EACC;EACA,MAAMQ,UAAU,GAAGN,MAAM,KAAK,IAAI;;EAElC;EACA,MAAMO,cAAc,GAAGb,KAAK,CAACc,MAAM,CAAC,CAAC;EACrC,MAAMC,QAAQ,GAAGf,KAAK,CAACc,MAAM,CAAC,EAAE,CAAC;EACjC,MAAME,UAAU,GAAGA,CAAA,KAAM;IACvBC,YAAY,CAACJ,cAAc,CAACK,OAAO,CAAC;EACtC,CAAC;;EAED;EACA,MAAMC,eAAe,GAAGC,CAAC,IAAI;IAC3BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBL,UAAU,CAAC,CAAC;IACZL,MAAM,CAACC,UAAU,EAAE,SAAS,CAAC;;IAE7B;IACA,SAASU,QAAQA,CAAA,EAAG;MAClBX,MAAM,CAACC,UAAU,EAAE,SAAS,CAAC;MAC7BC,cAAc,CAACK,OAAO,GAAGK,UAAU,CAACD,QAAQ,EAAErB,aAAa,CAAC;IAC9D;;IAEA;IACAY,cAAc,CAACK,OAAO,GAAGK,UAAU,CAACD,QAAQ,EAAEpB,UAAU,CAAC;EAC3D,CAAC;EACDF,KAAK,CAACwB,SAAS,CAAC,MAAM,MAAM;IAC1BR,UAAU,CAAC,CAAC;IACZD,QAAQ,CAACG,OAAO,CAACO,OAAO,CAACC,EAAE,IAAI;MAC7B5B,GAAG,CAAC6B,MAAM,CAACD,EAAE,CAAC;IAChB,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAME,eAAe,MAAAC,MAAA,CAAMxB,SAAS,YAAS;EAC7C,MAAMyB,eAAe,GAAG/B,IAAI,CAAC6B,eAAe,KAAAC,MAAA,CAAKD,eAAe,OAAAC,MAAA,CAAIvB,MAAM,GAAI;IAC5E,IAAAuB,MAAA,CAAID,eAAe,OAAAC,MAAA,CAAIvB,MAAM,iBAAcE;EAC7C,CAAC,EAAEC,SAAS,CAAC;;EAEb;EACA;EACA;EACA;EACA;EACA,MAAMsB,cAAc,GAAGA,CAAA,KAAMhB,QAAQ,CAACG,OAAO,CAACc,IAAI,CAAClC,GAAG,CAACkB,UAAU,CAAC,CAAC;EACnE,OAAO,aAAahB,KAAK,CAACiC,aAAa,CAAC,MAAM,EAAE;IAC9CC,YAAY,EAAE,IAAI;IAClBC,IAAI,EAAE,QAAQ;IACdC,SAAS,EAAEL,cAAc;IACzBM,YAAY,EAAEN,cAAc;IAC5BO,WAAW,EAAElB,CAAC,IAAI;MAChBD,eAAe,CAACC,CAAC,CAAC;IACpB,CAAC;IACD,YAAY,EAAER,UAAU,GAAG,gBAAgB,GAAG,gBAAgB;IAC9D,eAAe,EAAEJ,QAAQ;IACzBC,SAAS,EAAEqB,eAAe;IAC1BpB,KAAK,EAAEA;EACT,CAAC,EAAEH,QAAQ,IAAI,aAAaP,KAAK,CAACiC,aAAa,CAAC,MAAM,EAAE;IACtDC,YAAY,EAAE,IAAI;IAClBzB,SAAS,KAAAoB,MAAA,CAAKxB,SAAS,cAAAwB,MAAA,CAAWvB,MAAM;EAC1C,CAAC,CAAC,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
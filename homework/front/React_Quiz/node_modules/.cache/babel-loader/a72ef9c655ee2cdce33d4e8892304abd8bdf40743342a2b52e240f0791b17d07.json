{"ast":null,"code":"import _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"prefixCls\", \"defaultValue\", \"value\", \"autoSize\", \"onResize\", \"className\", \"style\", \"disabled\", \"onChange\", \"onInternalAutoSize\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport ResizeObserver from '@rc-component/resize-observer';\nimport useControlledState from \"@rc-component/util/es/hooks/useControlledState\";\nimport useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport raf from \"@rc-component/util/es/raf\";\nimport { clsx } from 'clsx';\nimport * as React from 'react';\nimport calculateAutoSizeStyle from \"./calculateNodeHeight\";\nconst RESIZE_START = 0;\nconst RESIZE_MEASURING = 1;\nconst RESIZE_STABLE = 2;\nconst ResizableTextArea = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      prefixCls,\n      defaultValue,\n      value,\n      autoSize,\n      onResize,\n      className,\n      style,\n      disabled,\n      onChange,\n      // Test only\n      onInternalAutoSize\n    } = props,\n    restProps = _objectWithoutProperties(props, _excluded);\n\n  // =============================== Value ================================\n  const [internalValue, setMergedValue] = useControlledState(defaultValue, value);\n  const mergedValue = internalValue !== null && internalValue !== void 0 ? internalValue : '';\n  const onInternalChange = event => {\n    setMergedValue(event.target.value);\n    onChange === null || onChange === void 0 || onChange(event);\n  };\n\n  // ================================ Ref =================================\n  const textareaRef = React.useRef();\n  React.useImperativeHandle(ref, () => ({\n    textArea: textareaRef.current\n  }));\n\n  // ============================== AutoSize ==============================\n  const [minRows, maxRows] = React.useMemo(() => {\n    if (autoSize && typeof autoSize === 'object') {\n      return [autoSize.minRows, autoSize.maxRows];\n    }\n    return [];\n  }, [autoSize]);\n  const needAutoSize = !!autoSize;\n\n  // =============================== Resize ===============================\n  const [resizeState, setResizeState] = React.useState(RESIZE_STABLE);\n  const [autoSizeStyle, setAutoSizeStyle] = React.useState();\n  const startResize = () => {\n    setResizeState(RESIZE_START);\n    if (process.env.NODE_ENV === 'test') {\n      onInternalAutoSize === null || onInternalAutoSize === void 0 || onInternalAutoSize();\n    }\n  };\n\n  // Change to trigger resize measure\n  useLayoutEffect(() => {\n    if (needAutoSize) {\n      startResize();\n    }\n  }, [value, minRows, maxRows, needAutoSize]);\n  useLayoutEffect(() => {\n    if (resizeState === RESIZE_START) {\n      setResizeState(RESIZE_MEASURING);\n    } else if (resizeState === RESIZE_MEASURING) {\n      const textareaStyles = calculateAutoSizeStyle(textareaRef.current, false, minRows, maxRows);\n\n      // Safari has bug that text will keep break line on text cut when it's prev is break line.\n      // ZombieJ: This not often happen. So we just skip it.\n      // const { selectionStart, selectionEnd, scrollTop } = textareaRef.current;\n      // const { value: tmpValue } = textareaRef.current;\n      // textareaRef.current.value = '';\n      // textareaRef.current.value = tmpValue;\n\n      // if (document.activeElement === textareaRef.current) {\n      //   textareaRef.current.scrollTop = scrollTop;\n      //   textareaRef.current.setSelectionRange(selectionStart, selectionEnd);\n      // }\n\n      setResizeState(RESIZE_STABLE);\n      setAutoSizeStyle(textareaStyles);\n    } else {\n      // https://github.com/react-component/textarea/pull/23\n      // Firefox has blink issue before but fixed in latest version.\n    }\n  }, [resizeState]);\n\n  // We lock resize trigger by raf to avoid Safari warning\n  const resizeRafRef = React.useRef();\n  const cleanRaf = () => {\n    raf.cancel(resizeRafRef.current);\n  };\n  const onInternalResize = size => {\n    if (resizeState === RESIZE_STABLE) {\n      onResize === null || onResize === void 0 || onResize(size);\n      if (autoSize) {\n        cleanRaf();\n        resizeRafRef.current = raf(() => {\n          startResize();\n        });\n      }\n    }\n  };\n  React.useEffect(() => cleanRaf, []);\n\n  // =============================== Render ===============================\n  const mergedAutoSizeStyle = needAutoSize ? autoSizeStyle : null;\n  const mergedStyle = _objectSpread(_objectSpread({}, style), mergedAutoSizeStyle);\n  if (resizeState === RESIZE_START || resizeState === RESIZE_MEASURING) {\n    mergedStyle.overflowY = 'hidden';\n    mergedStyle.overflowX = 'hidden';\n  }\n  return /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onInternalResize,\n    disabled: !(autoSize || onResize)\n  }, /*#__PURE__*/React.createElement(\"textarea\", _extends({}, restProps, {\n    ref: textareaRef,\n    style: mergedStyle,\n    className: clsx(prefixCls, className, {\n      [\"\".concat(prefixCls, \"-disabled\")]: disabled\n    }),\n    disabled: disabled,\n    value: mergedValue,\n    onChange: onInternalChange\n  })));\n});\nexport default ResizableTextArea;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","ResizeObserver","useControlledState","useLayoutEffect","raf","clsx","React","calculateAutoSizeStyle","RESIZE_START","RESIZE_MEASURING","RESIZE_STABLE","ResizableTextArea","forwardRef","props","ref","prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize","restProps","_objectWithoutProperties","_excluded","internalValue","setMergedValue","mergedValue","onInternalChange","event","textareaRef","useRef","useImperativeHandle","textArea","current","minRows","maxRows","useMemo","needAutoSize","resizeState","setResizeState","useState","autoSizeStyle","setAutoSizeStyle","startResize","process","env","NODE_ENV","textareaStyles","resizeRafRef","cleanRaf","cancel","onInternalResize","size","useEffect","mergedAutoSizeStyle","mergedStyle","_objectSpread","overflowY","overflowX","createElement","concat"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/textarea/es/ResizableTextArea.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport ResizeObserver from '@rc-component/resize-observer';\nimport useControlledState from \"@rc-component/util/es/hooks/useControlledState\";\nimport useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport raf from \"@rc-component/util/es/raf\";\nimport { clsx } from 'clsx';\nimport * as React from 'react';\nimport calculateAutoSizeStyle from \"./calculateNodeHeight\";\nconst RESIZE_START = 0;\nconst RESIZE_MEASURING = 1;\nconst RESIZE_STABLE = 2;\nconst ResizableTextArea = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    defaultValue,\n    value,\n    autoSize,\n    onResize,\n    className,\n    style,\n    disabled,\n    onChange,\n    // Test only\n    onInternalAutoSize,\n    ...restProps\n  } = props;\n\n  // =============================== Value ================================\n  const [internalValue, setMergedValue] = useControlledState(defaultValue, value);\n  const mergedValue = internalValue ?? '';\n  const onInternalChange = event => {\n    setMergedValue(event.target.value);\n    onChange?.(event);\n  };\n\n  // ================================ Ref =================================\n  const textareaRef = React.useRef();\n  React.useImperativeHandle(ref, () => ({\n    textArea: textareaRef.current\n  }));\n\n  // ============================== AutoSize ==============================\n  const [minRows, maxRows] = React.useMemo(() => {\n    if (autoSize && typeof autoSize === 'object') {\n      return [autoSize.minRows, autoSize.maxRows];\n    }\n    return [];\n  }, [autoSize]);\n  const needAutoSize = !!autoSize;\n\n  // =============================== Resize ===============================\n  const [resizeState, setResizeState] = React.useState(RESIZE_STABLE);\n  const [autoSizeStyle, setAutoSizeStyle] = React.useState();\n  const startResize = () => {\n    setResizeState(RESIZE_START);\n    if (process.env.NODE_ENV === 'test') {\n      onInternalAutoSize?.();\n    }\n  };\n\n  // Change to trigger resize measure\n  useLayoutEffect(() => {\n    if (needAutoSize) {\n      startResize();\n    }\n  }, [value, minRows, maxRows, needAutoSize]);\n  useLayoutEffect(() => {\n    if (resizeState === RESIZE_START) {\n      setResizeState(RESIZE_MEASURING);\n    } else if (resizeState === RESIZE_MEASURING) {\n      const textareaStyles = calculateAutoSizeStyle(textareaRef.current, false, minRows, maxRows);\n\n      // Safari has bug that text will keep break line on text cut when it's prev is break line.\n      // ZombieJ: This not often happen. So we just skip it.\n      // const { selectionStart, selectionEnd, scrollTop } = textareaRef.current;\n      // const { value: tmpValue } = textareaRef.current;\n      // textareaRef.current.value = '';\n      // textareaRef.current.value = tmpValue;\n\n      // if (document.activeElement === textareaRef.current) {\n      //   textareaRef.current.scrollTop = scrollTop;\n      //   textareaRef.current.setSelectionRange(selectionStart, selectionEnd);\n      // }\n\n      setResizeState(RESIZE_STABLE);\n      setAutoSizeStyle(textareaStyles);\n    } else {\n      // https://github.com/react-component/textarea/pull/23\n      // Firefox has blink issue before but fixed in latest version.\n    }\n  }, [resizeState]);\n\n  // We lock resize trigger by raf to avoid Safari warning\n  const resizeRafRef = React.useRef();\n  const cleanRaf = () => {\n    raf.cancel(resizeRafRef.current);\n  };\n  const onInternalResize = size => {\n    if (resizeState === RESIZE_STABLE) {\n      onResize?.(size);\n      if (autoSize) {\n        cleanRaf();\n        resizeRafRef.current = raf(() => {\n          startResize();\n        });\n      }\n    }\n  };\n  React.useEffect(() => cleanRaf, []);\n\n  // =============================== Render ===============================\n  const mergedAutoSizeStyle = needAutoSize ? autoSizeStyle : null;\n  const mergedStyle = {\n    ...style,\n    ...mergedAutoSizeStyle\n  };\n  if (resizeState === RESIZE_START || resizeState === RESIZE_MEASURING) {\n    mergedStyle.overflowY = 'hidden';\n    mergedStyle.overflowX = 'hidden';\n  }\n  return /*#__PURE__*/React.createElement(ResizeObserver, {\n    onResize: onInternalResize,\n    disabled: !(autoSize || onResize)\n  }, /*#__PURE__*/React.createElement(\"textarea\", _extends({}, restProps, {\n    ref: textareaRef,\n    style: mergedStyle,\n    className: clsx(prefixCls, className, {\n      [`${prefixCls}-disabled`]: disabled\n    }),\n    disabled: disabled,\n    value: mergedValue,\n    onChange: onInternalChange\n  })));\n});\nexport default ResizableTextArea;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
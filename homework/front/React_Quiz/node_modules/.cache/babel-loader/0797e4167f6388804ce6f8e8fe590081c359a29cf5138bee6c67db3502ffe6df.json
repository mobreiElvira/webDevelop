{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"value\", \"format\", \"onChange\", \"onFinish\", \"type\"];\nimport * as React from 'react';\nimport { useEvent } from '@rc-component/util';\nimport { cloneElement } from '../_util/reactNode';\nimport Statistic from './Statistic';\nimport { formatCounter } from './utils';\nconst UPDATE_INTERVAL = 1000 / 60;\nfunction getTime(value) {\n  return new Date(value).getTime();\n}\nconst StatisticTimer = props => {\n  const {\n      value,\n      format = 'HH:mm:ss',\n      onChange,\n      onFinish,\n      type\n    } = props,\n    rest = _objectWithoutProperties(props, _excluded);\n  const down = type === 'countdown';\n  // We reuse state here to do same as `forceUpdate`\n  const [showTime, setShowTime] = React.useState(null);\n  // ======================== Update ========================\n  const update = useEvent(() => {\n    const now = Date.now();\n    const timestamp = getTime(value);\n    setShowTime({});\n    const timeDiff = !down ? now - timestamp : timestamp - now;\n    onChange === null || onChange === void 0 || onChange(timeDiff);\n    // Only countdown will trigger `onFinish`\n    if (down && timestamp < now) {\n      onFinish === null || onFinish === void 0 || onFinish();\n      return false;\n    }\n    return true;\n  });\n  // Effect trigger\n  React.useEffect(() => {\n    let intervalId;\n    const tick = () => {\n      if (!update()) {\n        window.clearInterval(intervalId);\n      }\n    };\n    const startTimer = () => {\n      intervalId = window.setInterval(tick, UPDATE_INTERVAL);\n    };\n    const stopTimer = () => {\n      window.clearInterval(intervalId);\n    };\n    startTimer();\n    return () => {\n      stopTimer();\n    };\n  }, [value, down]);\n  React.useEffect(() => {\n    setShowTime({});\n  }, []);\n  // ======================== Format ========================\n  const formatter = (formatValue, config) => showTime ? formatCounter(formatValue, _objectSpread(_objectSpread({}, config), {}, {\n    format\n  }), down) : '-';\n  const valueRender = node => cloneElement(node, {\n    title: undefined\n  });\n  // ======================== Render ========================\n  return /*#__PURE__*/React.createElement(Statistic, _objectSpread(_objectSpread({}, rest), {}, {\n    value: value,\n    valueRender: valueRender,\n    formatter: formatter\n  }));\n};\nexport default StatisticTimer;","map":{"version":3,"names":["_objectSpread","_objectWithoutProperties","_excluded","React","useEvent","cloneElement","Statistic","formatCounter","UPDATE_INTERVAL","getTime","value","Date","StatisticTimer","props","format","onChange","onFinish","type","rest","down","showTime","setShowTime","useState","update","now","timestamp","timeDiff","useEffect","intervalId","tick","window","clearInterval","startTimer","setInterval","stopTimer","formatter","formatValue","config","valueRender","node","title","undefined","createElement"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/antd/es/statistic/Timer.js"],"sourcesContent":["\"use client\";\n\nimport * as React from 'react';\nimport { useEvent } from '@rc-component/util';\nimport { cloneElement } from '../_util/reactNode';\nimport Statistic from './Statistic';\nimport { formatCounter } from './utils';\nconst UPDATE_INTERVAL = 1000 / 60;\nfunction getTime(value) {\n  return new Date(value).getTime();\n}\nconst StatisticTimer = props => {\n  const {\n    value,\n    format = 'HH:mm:ss',\n    onChange,\n    onFinish,\n    type,\n    ...rest\n  } = props;\n  const down = type === 'countdown';\n  // We reuse state here to do same as `forceUpdate`\n  const [showTime, setShowTime] = React.useState(null);\n  // ======================== Update ========================\n  const update = useEvent(() => {\n    const now = Date.now();\n    const timestamp = getTime(value);\n    setShowTime({});\n    const timeDiff = !down ? now - timestamp : timestamp - now;\n    onChange?.(timeDiff);\n    // Only countdown will trigger `onFinish`\n    if (down && timestamp < now) {\n      onFinish?.();\n      return false;\n    }\n    return true;\n  });\n  // Effect trigger\n  React.useEffect(() => {\n    let intervalId;\n    const tick = () => {\n      if (!update()) {\n        window.clearInterval(intervalId);\n      }\n    };\n    const startTimer = () => {\n      intervalId = window.setInterval(tick, UPDATE_INTERVAL);\n    };\n    const stopTimer = () => {\n      window.clearInterval(intervalId);\n    };\n    startTimer();\n    return () => {\n      stopTimer();\n    };\n  }, [value, down]);\n  React.useEffect(() => {\n    setShowTime({});\n  }, []);\n  // ======================== Format ========================\n  const formatter = (formatValue, config) => showTime ? formatCounter(formatValue, {\n    ...config,\n    format\n  }, down) : '-';\n  const valueRender = node => cloneElement(node, {\n    title: undefined\n  });\n  // ======================== Render ========================\n  return /*#__PURE__*/React.createElement(Statistic, {\n    ...rest,\n    value: value,\n    valueRender: valueRender,\n    formatter: formatter\n  });\n};\nexport default StatisticTimer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
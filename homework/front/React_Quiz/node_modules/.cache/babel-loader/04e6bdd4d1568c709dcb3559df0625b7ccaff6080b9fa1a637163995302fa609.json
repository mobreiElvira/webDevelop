{"ast":null,"code":"import { useLayoutUpdateEffect } from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { useRef, useState } from 'react';\n\n/**\n * Help to merge callback with `useLayoutEffect`.\n * One time will only trigger once.\n */\nexport default function useUpdate(callback) {\n  const [count, setCount] = useState(0);\n  const effectRef = useRef(0);\n  const callbackRef = useRef();\n  callbackRef.current = callback;\n\n  // Trigger on `useLayoutEffect`\n  useLayoutUpdateEffect(() => {\n    var _callbackRef$current;\n    (_callbackRef$current = callbackRef.current) === null || _callbackRef$current === void 0 || _callbackRef$current.call(callbackRef);\n  }, [count]);\n\n  // Trigger to update count\n  return () => {\n    if (effectRef.current !== count) {\n      return;\n    }\n    effectRef.current += 1;\n    setCount(effectRef.current);\n  };\n}\nexport function useUpdateState(defaultState) {\n  const batchRef = useRef([]);\n  const [, forceUpdate] = useState({});\n  const state = useRef(typeof defaultState === 'function' ? defaultState() : defaultState);\n  const flushUpdate = useUpdate(() => {\n    let current = state.current;\n    batchRef.current.forEach(callback => {\n      current = callback(current);\n    });\n    batchRef.current = [];\n    state.current = current;\n    forceUpdate({});\n  });\n  function updater(callback) {\n    batchRef.current.push(callback);\n    flushUpdate();\n  }\n  return [state.current, updater];\n}","map":{"version":3,"names":["useLayoutUpdateEffect","useRef","useState","useUpdate","callback","count","setCount","effectRef","callbackRef","current","_callbackRef$current","call","useUpdateState","defaultState","batchRef","forceUpdate","state","flushUpdate","forEach","updater","push"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/tabs/es/hooks/useUpdate.js"],"sourcesContent":["import { useLayoutUpdateEffect } from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { useRef, useState } from 'react';\n\n/**\n * Help to merge callback with `useLayoutEffect`.\n * One time will only trigger once.\n */\nexport default function useUpdate(callback) {\n  const [count, setCount] = useState(0);\n  const effectRef = useRef(0);\n  const callbackRef = useRef();\n  callbackRef.current = callback;\n\n  // Trigger on `useLayoutEffect`\n  useLayoutUpdateEffect(() => {\n    callbackRef.current?.();\n  }, [count]);\n\n  // Trigger to update count\n  return () => {\n    if (effectRef.current !== count) {\n      return;\n    }\n    effectRef.current += 1;\n    setCount(effectRef.current);\n  };\n}\nexport function useUpdateState(defaultState) {\n  const batchRef = useRef([]);\n  const [, forceUpdate] = useState({});\n  const state = useRef(typeof defaultState === 'function' ? defaultState() : defaultState);\n  const flushUpdate = useUpdate(() => {\n    let current = state.current;\n    batchRef.current.forEach(callback => {\n      current = callback(current);\n    });\n    batchRef.current = [];\n    state.current = current;\n    forceUpdate({});\n  });\n  function updater(callback) {\n    batchRef.current.push(callback);\n    flushUpdate();\n  }\n  return [state.current, updater];\n}"],"mappings":"AAAA,SAASA,qBAAqB,QAAQ,6CAA6C;AACnF,SAASC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;;AAExC;AACA;AACA;AACA;AACA,eAAe,SAASC,SAASA,CAACC,QAAQ,EAAE;EAC1C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGJ,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAMK,SAAS,GAAGN,MAAM,CAAC,CAAC,CAAC;EAC3B,MAAMO,WAAW,GAAGP,MAAM,CAAC,CAAC;EAC5BO,WAAW,CAACC,OAAO,GAAGL,QAAQ;;EAE9B;EACAJ,qBAAqB,CAAC,MAAM;IAAA,IAAAU,oBAAA;IAC1B,CAAAA,oBAAA,GAAAF,WAAW,CAACC,OAAO,cAAAC,oBAAA,eAAnBA,oBAAA,CAAAC,IAAA,CAAAH,WAAsB,CAAC;EACzB,CAAC,EAAE,CAACH,KAAK,CAAC,CAAC;;EAEX;EACA,OAAO,MAAM;IACX,IAAIE,SAAS,CAACE,OAAO,KAAKJ,KAAK,EAAE;MAC/B;IACF;IACAE,SAAS,CAACE,OAAO,IAAI,CAAC;IACtBH,QAAQ,CAACC,SAAS,CAACE,OAAO,CAAC;EAC7B,CAAC;AACH;AACA,OAAO,SAASG,cAAcA,CAACC,YAAY,EAAE;EAC3C,MAAMC,QAAQ,GAAGb,MAAM,CAAC,EAAE,CAAC;EAC3B,MAAM,GAAGc,WAAW,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpC,MAAMc,KAAK,GAAGf,MAAM,CAAC,OAAOY,YAAY,KAAK,UAAU,GAAGA,YAAY,CAAC,CAAC,GAAGA,YAAY,CAAC;EACxF,MAAMI,WAAW,GAAGd,SAAS,CAAC,MAAM;IAClC,IAAIM,OAAO,GAAGO,KAAK,CAACP,OAAO;IAC3BK,QAAQ,CAACL,OAAO,CAACS,OAAO,CAACd,QAAQ,IAAI;MACnCK,OAAO,GAAGL,QAAQ,CAACK,OAAO,CAAC;IAC7B,CAAC,CAAC;IACFK,QAAQ,CAACL,OAAO,GAAG,EAAE;IACrBO,KAAK,CAACP,OAAO,GAAGA,OAAO;IACvBM,WAAW,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC;EACF,SAASI,OAAOA,CAACf,QAAQ,EAAE;IACzBU,QAAQ,CAACL,OAAO,CAACW,IAAI,CAAChB,QAAQ,CAAC;IAC/Ba,WAAW,CAAC,CAAC;EACf;EACA,OAAO,CAACD,KAAK,CAACP,OAAO,EAAEU,OAAO,CAAC;AACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
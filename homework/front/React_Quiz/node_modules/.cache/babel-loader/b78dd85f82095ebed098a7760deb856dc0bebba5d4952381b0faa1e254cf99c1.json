{"ast":null,"code":"import React, { useRef } from 'react';\nimport useColorDrag from \"../hooks/useColorDrag\";\nimport Palette from \"./Palette\";\nimport { useEvent } from '@rc-component/util';\nimport { clsx } from 'clsx';\nimport { Color } from \"../color\";\nimport { calcOffset, calculateColor } from \"../util\";\nimport Gradient from \"./Gradient\";\nimport Handler from \"./Handler\";\nimport Transform from \"./Transform\";\nconst Slider = props => {\n  const {\n    prefixCls,\n    colors,\n    disabled,\n    onChange,\n    onChangeComplete,\n    color,\n    type\n  } = props;\n  const sliderRef = useRef(null);\n  const transformRef = useRef(null);\n  const colorRef = useRef(color);\n  const getValue = c => {\n    return type === 'hue' ? c.getHue() : c.a * 100;\n  };\n  const onDragChange = useEvent(offsetValue => {\n    const calcColor = calculateColor({\n      offset: offsetValue,\n      targetRef: transformRef,\n      containerRef: sliderRef,\n      color,\n      type\n    });\n    colorRef.current = calcColor;\n    onChange(getValue(calcColor));\n  });\n  const [offset, dragStartHandle] = useColorDrag({\n    color,\n    targetRef: transformRef,\n    containerRef: sliderRef,\n    calculate: () => calcOffset(color, type),\n    onDragChange,\n    onDragChangeComplete() {\n      onChangeComplete(getValue(colorRef.current));\n    },\n    direction: 'x',\n    disabledDrag: disabled\n  });\n  const handleColor = React.useMemo(() => {\n    if (type === 'hue') {\n      const hsb = color.toHsb();\n      hsb.s = 1;\n      hsb.b = 1;\n      hsb.a = 1;\n      const lightColor = new Color(hsb);\n      return lightColor;\n    }\n    return color;\n  }, [color, type]);\n\n  // ========================= Gradient =========================\n  const gradientList = React.useMemo(() => colors.map(info => \"\".concat(info.color, \" \").concat(info.percent, \"%\")), [colors]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: sliderRef,\n    className: clsx(\"\".concat(prefixCls, \"-slider\"), \"\".concat(prefixCls, \"-slider-\").concat(type)),\n    onMouseDown: dragStartHandle,\n    onTouchStart: dragStartHandle\n  }, /*#__PURE__*/React.createElement(Palette, {\n    prefixCls: prefixCls\n  }, /*#__PURE__*/React.createElement(Transform, {\n    x: offset.x,\n    y: offset.y,\n    ref: transformRef\n  }, /*#__PURE__*/React.createElement(Handler, {\n    size: \"small\",\n    color: handleColor.toHexString(),\n    prefixCls: prefixCls\n  })), /*#__PURE__*/React.createElement(Gradient, {\n    colors: gradientList,\n    type: type,\n    prefixCls: prefixCls\n  })));\n};\nexport default Slider;","map":{"version":3,"names":["React","useRef","useColorDrag","Palette","useEvent","clsx","Color","calcOffset","calculateColor","Gradient","Handler","Transform","Slider","props","prefixCls","colors","disabled","onChange","onChangeComplete","color","type","sliderRef","transformRef","colorRef","getValue","c","getHue","a","onDragChange","offsetValue","calcColor","offset","targetRef","containerRef","current","dragStartHandle","calculate","onDragChangeComplete","direction","disabledDrag","handleColor","useMemo","hsb","toHsb","s","b","lightColor","gradientList","map","info","concat","percent","createElement","ref","className","onMouseDown","onTouchStart","x","y","size","toHexString"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/color-picker/es/components/Slider.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport useColorDrag from \"../hooks/useColorDrag\";\nimport Palette from \"./Palette\";\nimport { useEvent } from '@rc-component/util';\nimport { clsx } from 'clsx';\nimport { Color } from \"../color\";\nimport { calcOffset, calculateColor } from \"../util\";\nimport Gradient from \"./Gradient\";\nimport Handler from \"./Handler\";\nimport Transform from \"./Transform\";\nconst Slider = props => {\n  const {\n    prefixCls,\n    colors,\n    disabled,\n    onChange,\n    onChangeComplete,\n    color,\n    type\n  } = props;\n  const sliderRef = useRef(null);\n  const transformRef = useRef(null);\n  const colorRef = useRef(color);\n  const getValue = c => {\n    return type === 'hue' ? c.getHue() : c.a * 100;\n  };\n  const onDragChange = useEvent(offsetValue => {\n    const calcColor = calculateColor({\n      offset: offsetValue,\n      targetRef: transformRef,\n      containerRef: sliderRef,\n      color,\n      type\n    });\n    colorRef.current = calcColor;\n    onChange(getValue(calcColor));\n  });\n  const [offset, dragStartHandle] = useColorDrag({\n    color,\n    targetRef: transformRef,\n    containerRef: sliderRef,\n    calculate: () => calcOffset(color, type),\n    onDragChange,\n    onDragChangeComplete() {\n      onChangeComplete(getValue(colorRef.current));\n    },\n    direction: 'x',\n    disabledDrag: disabled\n  });\n  const handleColor = React.useMemo(() => {\n    if (type === 'hue') {\n      const hsb = color.toHsb();\n      hsb.s = 1;\n      hsb.b = 1;\n      hsb.a = 1;\n      const lightColor = new Color(hsb);\n      return lightColor;\n    }\n    return color;\n  }, [color, type]);\n\n  // ========================= Gradient =========================\n  const gradientList = React.useMemo(() => colors.map(info => `${info.color} ${info.percent}%`), [colors]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: sliderRef,\n    className: clsx(`${prefixCls}-slider`, `${prefixCls}-slider-${type}`),\n    onMouseDown: dragStartHandle,\n    onTouchStart: dragStartHandle\n  }, /*#__PURE__*/React.createElement(Palette, {\n    prefixCls: prefixCls\n  }, /*#__PURE__*/React.createElement(Transform, {\n    x: offset.x,\n    y: offset.y,\n    ref: transformRef\n  }, /*#__PURE__*/React.createElement(Handler, {\n    size: \"small\",\n    color: handleColor.toHexString(),\n    prefixCls: prefixCls\n  })), /*#__PURE__*/React.createElement(Gradient, {\n    colors: gradientList,\n    type: type,\n    prefixCls: prefixCls\n  })));\n};\nexport default Slider;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
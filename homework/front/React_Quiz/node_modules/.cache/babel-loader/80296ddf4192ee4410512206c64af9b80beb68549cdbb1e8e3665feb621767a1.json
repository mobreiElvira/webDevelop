{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport useState from \"@rc-component/util/es/hooks/useState\";\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\nconst isThenable = thing => {\n  return typeof (thing === null || thing === void 0 ? void 0 : thing.then) === 'function';\n};\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const onInternalClose = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    close === null || close === void 0 || close(...args);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _buttonRef$current;\n        (_buttonRef$current = buttonRef.current) === null || _buttonRef$current === void 0 || _buttonRef$current.focus({\n          preventScroll: true\n        });\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [autoFocus]);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      onInternalClose.apply(void 0, args);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      // Do not throw if is `await` mode\n      if (isSilent !== null && isSilent !== void 0 && isSilent()) {\n        return;\n      }\n      return Promise.reject(e);\n    });\n  };\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!isThenable(returnValueOfOnOk)) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps), {}, {\n    ref: buttonRef\n  }), children);\n};\nexport default ActionButton;","map":{"version":3,"names":["_objectSpread","React","useState","Button","convertLegacyProps","isThenable","thing","then","ActionButton","props","type","children","prefixCls","buttonProps","close","autoFocus","emitEvent","isSilent","quitOnNullishReturnValue","actionFn","clickedRef","useRef","buttonRef","loading","setLoading","onInternalClose","_len","arguments","length","args","Array","_key","useEffect","timeoutId","setTimeout","_buttonRef$current","current","focus","preventScroll","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","_len2","_key2","apply","e","Promise","reject","onClick","createElement","ref"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/antd/es/_util/ActionButton.js"],"sourcesContent":["\"use client\";\n\nimport * as React from 'react';\nimport useState from \"@rc-component/util/es/hooks/useState\";\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonHelpers';\nconst isThenable = thing => {\n  return typeof thing?.then === 'function';\n};\nconst ActionButton = props => {\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps,\n    close,\n    autoFocus,\n    emitEvent,\n    isSilent,\n    quitOnNullishReturnValue,\n    actionFn\n  } = props;\n  const clickedRef = React.useRef(false);\n  const buttonRef = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const onInternalClose = (...args) => {\n    close?.(...args);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (autoFocus) {\n      timeoutId = setTimeout(() => {\n        buttonRef.current?.focus({\n          preventScroll: true\n        });\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [autoFocus]);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then((...args) => {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, args);\n      clickedRef.current = false;\n    }, e => {\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n      // Do not throw if is `await` mode\n      if (isSilent?.()) {\n        return;\n      }\n      return Promise.reject(e);\n    });\n  };\n  const onClick = e => {\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!isThenable(returnValueOfOnOk)) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  return /*#__PURE__*/React.createElement(Button, {\n    ...convertLegacyProps(type),\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls,\n    ...buttonProps,\n    ref: buttonRef\n  }, children);\n};\nexport default ActionButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import isVisible from \"./isVisible\";\nfunction focusable(node) {\n  let includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (isVisible(node)) {\n    const nodeName = node.nodeName.toLowerCase();\n    const isFocusableElement =\n    // Focusable element\n    ['input', 'select', 'textarea', 'button'].includes(nodeName) ||\n    // Editable element\n    node.isContentEditable ||\n    // Anchor with href element\n    nodeName === 'a' && !!node.getAttribute('href');\n\n    // Get tabIndex\n    const tabIndexAttr = node.getAttribute('tabindex');\n    const tabIndexNum = Number(tabIndexAttr);\n\n    // Parse as number if validate\n    let tabIndex = null;\n    if (tabIndexAttr && !Number.isNaN(tabIndexNum)) {\n      tabIndex = tabIndexNum;\n    } else if (isFocusableElement && tabIndex === null) {\n      tabIndex = 0;\n    }\n\n    // Block focusable if disabled\n    if (isFocusableElement && node.disabled) {\n      tabIndex = null;\n    }\n    return tabIndex !== null && (tabIndex >= 0 || includePositive && tabIndex < 0);\n  }\n  return false;\n}\nexport function getFocusNodeList(node) {\n  let includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const res = [...node.querySelectorAll('*')].filter(child => {\n    return focusable(child, includePositive);\n  });\n  if (focusable(node, includePositive)) {\n    res.unshift(node);\n  }\n  return res;\n}\nlet lastFocusElement = null;\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function saveLastFocusNode() {\n  lastFocusElement = document.activeElement;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function clearLastFocusNode() {\n  lastFocusElement = null;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function backLastFocusNode() {\n  if (lastFocusElement) {\n    try {\n      // 元素可能已经被移动了\n      lastFocusElement.focus();\n\n      /* eslint-disable no-empty */\n    } catch (e) {\n      // empty\n    }\n    /* eslint-enable no-empty */\n  }\n}\nexport function limitTabRange(node, e) {\n  if (e.keyCode === 9) {\n    const tabNodeList = getFocusNodeList(node);\n    const lastTabNode = tabNodeList[e.shiftKey ? 0 : tabNodeList.length - 1];\n    const leavingTab = lastTabNode === document.activeElement || node === document.activeElement;\n    if (leavingTab) {\n      const target = tabNodeList[e.shiftKey ? tabNodeList.length - 1 : 0];\n      target.focus();\n      e.preventDefault();\n    }\n  }\n}\n// Used for `rc-input` `rc-textarea` `rc-input-number`\n/**\n * Focus element and set cursor position for input/textarea elements.\n */\nexport function triggerFocus(element, option) {\n  if (!element) return;\n  element.focus(option);\n\n  // Selection content\n  const {\n    cursor\n  } = option || {};\n  if (cursor && (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement)) {\n    const len = element.value.length;\n    switch (cursor) {\n      case 'start':\n        element.setSelectionRange(0, 0);\n        break;\n      case 'end':\n        element.setSelectionRange(len, len);\n        break;\n      default:\n        element.setSelectionRange(0, len);\n    }\n  }\n}","map":{"version":3,"names":["isVisible","focusable","node","includePositive","arguments","length","undefined","nodeName","toLowerCase","isFocusableElement","includes","isContentEditable","getAttribute","tabIndexAttr","tabIndexNum","Number","tabIndex","isNaN","disabled","getFocusNodeList","res","querySelectorAll","filter","child","unshift","lastFocusElement","saveLastFocusNode","document","activeElement","clearLastFocusNode","backLastFocusNode","focus","e","limitTabRange","keyCode","tabNodeList","lastTabNode","shiftKey","leavingTab","target","preventDefault","triggerFocus","element","option","cursor","HTMLInputElement","HTMLTextAreaElement","len","value","setSelectionRange"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/util/es/Dom/focus.js"],"sourcesContent":["import isVisible from \"./isVisible\";\nfunction focusable(node, includePositive = false) {\n  if (isVisible(node)) {\n    const nodeName = node.nodeName.toLowerCase();\n    const isFocusableElement =\n    // Focusable element\n    ['input', 'select', 'textarea', 'button'].includes(nodeName) ||\n    // Editable element\n    node.isContentEditable ||\n    // Anchor with href element\n    nodeName === 'a' && !!node.getAttribute('href');\n\n    // Get tabIndex\n    const tabIndexAttr = node.getAttribute('tabindex');\n    const tabIndexNum = Number(tabIndexAttr);\n\n    // Parse as number if validate\n    let tabIndex = null;\n    if (tabIndexAttr && !Number.isNaN(tabIndexNum)) {\n      tabIndex = tabIndexNum;\n    } else if (isFocusableElement && tabIndex === null) {\n      tabIndex = 0;\n    }\n\n    // Block focusable if disabled\n    if (isFocusableElement && node.disabled) {\n      tabIndex = null;\n    }\n    return tabIndex !== null && (tabIndex >= 0 || includePositive && tabIndex < 0);\n  }\n  return false;\n}\nexport function getFocusNodeList(node, includePositive = false) {\n  const res = [...node.querySelectorAll('*')].filter(child => {\n    return focusable(child, includePositive);\n  });\n  if (focusable(node, includePositive)) {\n    res.unshift(node);\n  }\n  return res;\n}\nlet lastFocusElement = null;\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function saveLastFocusNode() {\n  lastFocusElement = document.activeElement;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function clearLastFocusNode() {\n  lastFocusElement = null;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nexport function backLastFocusNode() {\n  if (lastFocusElement) {\n    try {\n      // 元素可能已经被移动了\n      lastFocusElement.focus();\n\n      /* eslint-disable no-empty */\n    } catch (e) {\n      // empty\n    }\n    /* eslint-enable no-empty */\n  }\n}\nexport function limitTabRange(node, e) {\n  if (e.keyCode === 9) {\n    const tabNodeList = getFocusNodeList(node);\n    const lastTabNode = tabNodeList[e.shiftKey ? 0 : tabNodeList.length - 1];\n    const leavingTab = lastTabNode === document.activeElement || node === document.activeElement;\n    if (leavingTab) {\n      const target = tabNodeList[e.shiftKey ? tabNodeList.length - 1 : 0];\n      target.focus();\n      e.preventDefault();\n    }\n  }\n}\n// Used for `rc-input` `rc-textarea` `rc-input-number`\n/**\n * Focus element and set cursor position for input/textarea elements.\n */\nexport function triggerFocus(element, option) {\n  if (!element) return;\n  element.focus(option);\n\n  // Selection content\n  const {\n    cursor\n  } = option || {};\n  if (cursor && (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement)) {\n    const len = element.value.length;\n    switch (cursor) {\n      case 'start':\n        element.setSelectionRange(0, 0);\n        break;\n      case 'end':\n        element.setSelectionRange(len, len);\n        break;\n      default:\n        element.setSelectionRange(0, len);\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
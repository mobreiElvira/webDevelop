{"ast":null,"code":"import { useRef, useState, useEffect } from 'react';\n/**\n * Execute code before next frame but async\n */\nexport function useLayoutState(defaultState) {\n  const stateRef = useRef(defaultState);\n  const [, forceUpdate] = useState({});\n  const lastPromiseRef = useRef(null);\n  const updateBatchRef = useRef([]);\n  function setFrameState(updater) {\n    updateBatchRef.current.push(updater);\n    const promise = Promise.resolve();\n    lastPromiseRef.current = promise;\n    promise.then(() => {\n      if (lastPromiseRef.current === promise) {\n        const prevBatch = updateBatchRef.current;\n        const prevState = stateRef.current;\n        updateBatchRef.current = [];\n        prevBatch.forEach(batchUpdater => {\n          stateRef.current = batchUpdater(stateRef.current);\n        });\n        lastPromiseRef.current = null;\n        if (prevState !== stateRef.current) {\n          forceUpdate({});\n        }\n      }\n    });\n  }\n  useEffect(() => () => {\n    lastPromiseRef.current = null;\n  }, []);\n  return [stateRef.current, setFrameState];\n}\n\n/** Lock frame, when frame pass reset the lock. */\nexport function useTimeoutLock(defaultState) {\n  const frameRef = useRef(defaultState || null);\n  const timeoutRef = useRef(null);\n  function cleanUp() {\n    clearTimeout(timeoutRef.current);\n  }\n  function setState(newState) {\n    frameRef.current = newState;\n    cleanUp();\n    timeoutRef.current = setTimeout(() => {\n      frameRef.current = null;\n      timeoutRef.current = undefined;\n    }, 100);\n  }\n  function getState() {\n    return frameRef.current;\n  }\n  useEffect(() => cleanUp, []);\n  return [setState, getState];\n}","map":{"version":3,"names":["useRef","useState","useEffect","useLayoutState","defaultState","stateRef","forceUpdate","lastPromiseRef","updateBatchRef","setFrameState","updater","current","push","promise","Promise","resolve","then","prevBatch","prevState","forEach","batchUpdater","useTimeoutLock","frameRef","timeoutRef","cleanUp","clearTimeout","setState","newState","setTimeout","undefined","getState"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/table/es/hooks/useFrame.js"],"sourcesContent":["import { useRef, useState, useEffect } from 'react';\n/**\n * Execute code before next frame but async\n */\nexport function useLayoutState(defaultState) {\n  const stateRef = useRef(defaultState);\n  const [, forceUpdate] = useState({});\n  const lastPromiseRef = useRef(null);\n  const updateBatchRef = useRef([]);\n  function setFrameState(updater) {\n    updateBatchRef.current.push(updater);\n    const promise = Promise.resolve();\n    lastPromiseRef.current = promise;\n    promise.then(() => {\n      if (lastPromiseRef.current === promise) {\n        const prevBatch = updateBatchRef.current;\n        const prevState = stateRef.current;\n        updateBatchRef.current = [];\n        prevBatch.forEach(batchUpdater => {\n          stateRef.current = batchUpdater(stateRef.current);\n        });\n        lastPromiseRef.current = null;\n        if (prevState !== stateRef.current) {\n          forceUpdate({});\n        }\n      }\n    });\n  }\n  useEffect(() => () => {\n    lastPromiseRef.current = null;\n  }, []);\n  return [stateRef.current, setFrameState];\n}\n\n/** Lock frame, when frame pass reset the lock. */\nexport function useTimeoutLock(defaultState) {\n  const frameRef = useRef(defaultState || null);\n  const timeoutRef = useRef(null);\n  function cleanUp() {\n    clearTimeout(timeoutRef.current);\n  }\n  function setState(newState) {\n    frameRef.current = newState;\n    cleanUp();\n    timeoutRef.current = setTimeout(() => {\n      frameRef.current = null;\n      timeoutRef.current = undefined;\n    }, 100);\n  }\n  function getState() {\n    return frameRef.current;\n  }\n  useEffect(() => cleanUp, []);\n  return [setState, getState];\n}"],"mappings":"AAAA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACnD;AACA;AACA;AACA,OAAO,SAASC,cAAcA,CAACC,YAAY,EAAE;EAC3C,MAAMC,QAAQ,GAAGL,MAAM,CAACI,YAAY,CAAC;EACrC,MAAM,GAAGE,WAAW,CAAC,GAAGL,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpC,MAAMM,cAAc,GAAGP,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMQ,cAAc,GAAGR,MAAM,CAAC,EAAE,CAAC;EACjC,SAASS,aAAaA,CAACC,OAAO,EAAE;IAC9BF,cAAc,CAACG,OAAO,CAACC,IAAI,CAACF,OAAO,CAAC;IACpC,MAAMG,OAAO,GAAGC,OAAO,CAACC,OAAO,CAAC,CAAC;IACjCR,cAAc,CAACI,OAAO,GAAGE,OAAO;IAChCA,OAAO,CAACG,IAAI,CAAC,MAAM;MACjB,IAAIT,cAAc,CAACI,OAAO,KAAKE,OAAO,EAAE;QACtC,MAAMI,SAAS,GAAGT,cAAc,CAACG,OAAO;QACxC,MAAMO,SAAS,GAAGb,QAAQ,CAACM,OAAO;QAClCH,cAAc,CAACG,OAAO,GAAG,EAAE;QAC3BM,SAAS,CAACE,OAAO,CAACC,YAAY,IAAI;UAChCf,QAAQ,CAACM,OAAO,GAAGS,YAAY,CAACf,QAAQ,CAACM,OAAO,CAAC;QACnD,CAAC,CAAC;QACFJ,cAAc,CAACI,OAAO,GAAG,IAAI;QAC7B,IAAIO,SAAS,KAAKb,QAAQ,CAACM,OAAO,EAAE;UAClCL,WAAW,CAAC,CAAC,CAAC,CAAC;QACjB;MACF;IACF,CAAC,CAAC;EACJ;EACAJ,SAAS,CAAC,MAAM,MAAM;IACpBK,cAAc,CAACI,OAAO,GAAG,IAAI;EAC/B,CAAC,EAAE,EAAE,CAAC;EACN,OAAO,CAACN,QAAQ,CAACM,OAAO,EAAEF,aAAa,CAAC;AAC1C;;AAEA;AACA,OAAO,SAASY,cAAcA,CAACjB,YAAY,EAAE;EAC3C,MAAMkB,QAAQ,GAAGtB,MAAM,CAACI,YAAY,IAAI,IAAI,CAAC;EAC7C,MAAMmB,UAAU,GAAGvB,MAAM,CAAC,IAAI,CAAC;EAC/B,SAASwB,OAAOA,CAAA,EAAG;IACjBC,YAAY,CAACF,UAAU,CAACZ,OAAO,CAAC;EAClC;EACA,SAASe,QAAQA,CAACC,QAAQ,EAAE;IAC1BL,QAAQ,CAACX,OAAO,GAAGgB,QAAQ;IAC3BH,OAAO,CAAC,CAAC;IACTD,UAAU,CAACZ,OAAO,GAAGiB,UAAU,CAAC,MAAM;MACpCN,QAAQ,CAACX,OAAO,GAAG,IAAI;MACvBY,UAAU,CAACZ,OAAO,GAAGkB,SAAS;IAChC,CAAC,EAAE,GAAG,CAAC;EACT;EACA,SAASC,QAAQA,CAAA,EAAG;IAClB,OAAOR,QAAQ,CAACX,OAAO;EACzB;EACAT,SAAS,CAAC,MAAMsB,OAAO,EAAE,EAAE,CAAC;EAC5B,OAAO,CAACE,QAAQ,EAAEI,QAAQ,CAAC;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectWithoutProperties from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"open\", \"onOpenChange\", \"current\", \"onChange\"],\n  _excluded2 = [\"src\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport useControlledState from \"@rc-component/util/es/hooks/useControlledState\";\nimport useEvent from \"@rc-component/util/es/hooks/useEvent\";\nimport * as React from 'react';\nimport { useState } from 'react';\nimport Preview from \"./Preview\";\nimport { PreviewGroupContext } from \"./context\";\nimport usePreviewItems from \"./hooks/usePreviewItems\";\nconst Group = _ref => {\n  var _mergedItems$current;\n  let {\n    previewPrefixCls = 'rc-image-preview',\n    classNames,\n    styles,\n    children,\n    icons = {},\n    items,\n    preview,\n    fallback\n  } = _ref;\n  const _ref2 = preview && typeof preview === 'object' ? preview : {},\n    {\n      open: previewOpen,\n      onOpenChange,\n      current: currentIndex,\n      onChange\n    } = _ref2,\n    restProps = _objectWithoutProperties(_ref2, _excluded);\n\n  // ========================== Items ===========================\n  const [mergedItems, register, fromItems] = usePreviewItems(items);\n\n  // ========================= Preview ==========================\n  // >>> Index\n  const [current, setCurrent] = useControlledState(0, currentIndex);\n  const [keepOpenIndex, setKeepOpenIndex] = useState(false);\n\n  // >>> Image\n  const _ref3 = ((_mergedItems$current = mergedItems[current]) === null || _mergedItems$current === void 0 ? void 0 : _mergedItems$current.data) || {},\n    {\n      src\n    } = _ref3,\n    imgCommonProps = _objectWithoutProperties(_ref3, _excluded2);\n  // >>> Visible\n  const [isShowPreview, setShowPreview] = useControlledState(!!previewOpen, previewOpen);\n  const triggerShowPreview = useEvent(next => {\n    setShowPreview(next);\n    if (next !== isShowPreview) {\n      onOpenChange === null || onOpenChange === void 0 || onOpenChange(next, {\n        current\n      });\n    }\n  });\n\n  // >>> Position\n  const [mousePosition, setMousePosition] = useState(null);\n  const onPreviewFromImage = React.useCallback((id, imageSrc, mouseX, mouseY) => {\n    const index = fromItems ? mergedItems.findIndex(item => item.data.src === imageSrc) : mergedItems.findIndex(item => item.id === id);\n    setCurrent(index < 0 ? 0 : index);\n    triggerShowPreview(true);\n    setMousePosition({\n      x: mouseX,\n      y: mouseY\n    });\n    setKeepOpenIndex(true);\n  }, [mergedItems, fromItems]);\n\n  // Reset current when reopen\n  React.useEffect(() => {\n    if (isShowPreview) {\n      if (!keepOpenIndex) {\n        setCurrent(0);\n      }\n    } else {\n      setKeepOpenIndex(false);\n    }\n  }, [isShowPreview]);\n\n  // ========================== Events ==========================\n  const onInternalChange = (next, prev) => {\n    setCurrent(next);\n    onChange === null || onChange === void 0 || onChange(next, prev);\n  };\n  const onPreviewClose = () => {\n    triggerShowPreview(false);\n    setMousePosition(null);\n  };\n\n  // ========================= Context ==========================\n  const previewGroupContext = React.useMemo(() => ({\n    register,\n    onPreview: onPreviewFromImage\n  }), [register, onPreviewFromImage]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(PreviewGroupContext.Provider, {\n    value: previewGroupContext\n  }, children, /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    open: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    imgCommonProps: imgCommonProps,\n    src: src,\n    fallback: fallback,\n    icons: icons,\n    current: current,\n    count: mergedItems.length,\n    onChange: onInternalChange\n  }, restProps, {\n    classNames: classNames === null || classNames === void 0 ? void 0 : classNames.popup,\n    styles: styles === null || styles === void 0 ? void 0 : styles.popup\n  })));\n};\nexport default Group;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","useControlledState","useEvent","React","useState","Preview","PreviewGroupContext","usePreviewItems","Group","_ref","_mergedItems$current","previewPrefixCls","classNames","styles","children","icons","items","preview","fallback","_ref2","open","previewOpen","onOpenChange","current","currentIndex","onChange","restProps","_objectWithoutProperties","_excluded","mergedItems","register","fromItems","setCurrent","keepOpenIndex","setKeepOpenIndex","_ref3","data","src","imgCommonProps","_excluded2","isShowPreview","setShowPreview","triggerShowPreview","next","mousePosition","setMousePosition","onPreviewFromImage","useCallback","id","imageSrc","mouseX","mouseY","index","findIndex","item","x","y","useEffect","onInternalChange","prev","onPreviewClose","previewGroupContext","useMemo","onPreview","createElement","Provider","value","prefixCls","onClose","count","popup"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/image/es/PreviewGroup.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport useControlledState from \"@rc-component/util/es/hooks/useControlledState\";\nimport useEvent from \"@rc-component/util/es/hooks/useEvent\";\nimport * as React from 'react';\nimport { useState } from 'react';\nimport Preview from \"./Preview\";\nimport { PreviewGroupContext } from \"./context\";\nimport usePreviewItems from \"./hooks/usePreviewItems\";\nconst Group = ({\n  previewPrefixCls = 'rc-image-preview',\n  classNames,\n  styles,\n  children,\n  icons = {},\n  items,\n  preview,\n  fallback\n}) => {\n  const {\n    open: previewOpen,\n    onOpenChange,\n    current: currentIndex,\n    onChange,\n    ...restProps\n  } = preview && typeof preview === 'object' ? preview : {};\n\n  // ========================== Items ===========================\n  const [mergedItems, register, fromItems] = usePreviewItems(items);\n\n  // ========================= Preview ==========================\n  // >>> Index\n  const [current, setCurrent] = useControlledState(0, currentIndex);\n  const [keepOpenIndex, setKeepOpenIndex] = useState(false);\n\n  // >>> Image\n  const {\n    src,\n    ...imgCommonProps\n  } = mergedItems[current]?.data || {};\n  // >>> Visible\n  const [isShowPreview, setShowPreview] = useControlledState(!!previewOpen, previewOpen);\n  const triggerShowPreview = useEvent(next => {\n    setShowPreview(next);\n    if (next !== isShowPreview) {\n      onOpenChange?.(next, {\n        current\n      });\n    }\n  });\n\n  // >>> Position\n  const [mousePosition, setMousePosition] = useState(null);\n  const onPreviewFromImage = React.useCallback((id, imageSrc, mouseX, mouseY) => {\n    const index = fromItems ? mergedItems.findIndex(item => item.data.src === imageSrc) : mergedItems.findIndex(item => item.id === id);\n    setCurrent(index < 0 ? 0 : index);\n    triggerShowPreview(true);\n    setMousePosition({\n      x: mouseX,\n      y: mouseY\n    });\n    setKeepOpenIndex(true);\n  }, [mergedItems, fromItems]);\n\n  // Reset current when reopen\n  React.useEffect(() => {\n    if (isShowPreview) {\n      if (!keepOpenIndex) {\n        setCurrent(0);\n      }\n    } else {\n      setKeepOpenIndex(false);\n    }\n  }, [isShowPreview]);\n\n  // ========================== Events ==========================\n  const onInternalChange = (next, prev) => {\n    setCurrent(next);\n    onChange?.(next, prev);\n  };\n  const onPreviewClose = () => {\n    triggerShowPreview(false);\n    setMousePosition(null);\n  };\n\n  // ========================= Context ==========================\n  const previewGroupContext = React.useMemo(() => ({\n    register,\n    onPreview: onPreviewFromImage\n  }), [register, onPreviewFromImage]);\n\n  // ========================== Render ==========================\n  return /*#__PURE__*/React.createElement(PreviewGroupContext.Provider, {\n    value: previewGroupContext\n  }, children, /*#__PURE__*/React.createElement(Preview, _extends({\n    \"aria-hidden\": !isShowPreview,\n    open: isShowPreview,\n    prefixCls: previewPrefixCls,\n    onClose: onPreviewClose,\n    mousePosition: mousePosition,\n    imgCommonProps: imgCommonProps,\n    src: src,\n    fallback: fallback,\n    icons: icons,\n    current: current,\n    count: mergedItems.length,\n    onChange: onInternalChange\n  }, restProps, {\n    classNames: classNames?.popup,\n    styles: styles?.popup\n  })));\n};\nexport default Group;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { removeCSS, updateCSS } from \"@rc-component/util/es/Dom/dynamicCSS\";\nimport { useContext } from 'react';\nimport StyleContext, { ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../StyleContext\";\nimport { isClientSide, toStyleStr } from \"../util\";\nimport { transformToken } from \"../util/css-variables\";\nimport useGlobalCache from \"./useGlobalCache\";\nimport { uniqueHash } from \"./useStyleRegister\";\nexport const CSS_VAR_PREFIX = 'cssVar';\nconst useCSSVarRegister = (config, fn) => {\n  const {\n    key,\n    prefix,\n    unitless,\n    ignore,\n    token,\n    hashId,\n    scope = ''\n  } = config;\n  const {\n    cache: {\n      instanceId\n    },\n    container,\n    hashPriority\n  } = useContext(StyleContext);\n  const {\n    _tokenKey: tokenKey\n  } = token;\n  const stylePath = [...config.path, key, scope, tokenKey];\n  const cache = useGlobalCache(CSS_VAR_PREFIX, stylePath, () => {\n    const originToken = fn();\n    const [mergedToken, cssVarsStr] = transformToken(originToken, key, {\n      prefix,\n      unitless,\n      ignore,\n      scope,\n      hashPriority,\n      hashCls: hashId\n    });\n    const styleId = uniqueHash(stylePath, cssVarsStr);\n    return [mergedToken, cssVarsStr, styleId, key];\n  }, _ref => {\n    let [,, styleId] = _ref;\n    if (isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK,\n        attachTo: container\n      });\n    }\n  }, _ref2 => {\n    let [, cssVarsStr, styleId] = _ref2;\n    if (!cssVarsStr) {\n      return;\n    }\n    const style = updateCSS(cssVarsStr, styleId, {\n      mark: ATTR_MARK,\n      prepend: 'queue',\n      attachTo: container,\n      priority: -999\n    });\n    style[CSS_IN_JS_INSTANCE] = instanceId;\n\n    // Used for `useCacheToken` to remove on batch when token removed\n    style.setAttribute(ATTR_TOKEN, key);\n  });\n  return cache;\n};\nexport const extract = (cache, effectStyles, options) => {\n  const [, styleStr, styleId, cssVarKey] = cache;\n  const {\n    plain\n  } = options || {};\n  if (!styleStr) {\n    return null;\n  }\n  const order = -999;\n\n  // ====================== Style ======================\n  // Used for @rc-component/util\n  const sharedAttrs = {\n    'data-rc-order': 'prependQueue',\n    'data-rc-priority': \"\".concat(order)\n  };\n  const styleText = toStyleStr(styleStr, cssVarKey, styleId, sharedAttrs, plain);\n  return [order, styleId, styleText];\n};\nexport default useCSSVarRegister;","map":{"version":3,"names":["removeCSS","updateCSS","useContext","StyleContext","ATTR_MARK","ATTR_TOKEN","CSS_IN_JS_INSTANCE","isClientSide","toStyleStr","transformToken","useGlobalCache","uniqueHash","CSS_VAR_PREFIX","useCSSVarRegister","config","fn","key","prefix","unitless","ignore","token","hashId","scope","cache","instanceId","container","hashPriority","_tokenKey","tokenKey","stylePath","path","originToken","mergedToken","cssVarsStr","hashCls","styleId","_ref","mark","attachTo","_ref2","style","prepend","priority","setAttribute","extract","effectStyles","options","styleStr","cssVarKey","plain","order","sharedAttrs","concat","styleText"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@ant-design/cssinjs/es/hooks/useCSSVarRegister.js"],"sourcesContent":["import { removeCSS, updateCSS } from \"@rc-component/util/es/Dom/dynamicCSS\";\nimport { useContext } from 'react';\nimport StyleContext, { ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../StyleContext\";\nimport { isClientSide, toStyleStr } from \"../util\";\nimport { transformToken } from \"../util/css-variables\";\nimport useGlobalCache from \"./useGlobalCache\";\nimport { uniqueHash } from \"./useStyleRegister\";\nexport const CSS_VAR_PREFIX = 'cssVar';\nconst useCSSVarRegister = (config, fn) => {\n  const {\n    key,\n    prefix,\n    unitless,\n    ignore,\n    token,\n    hashId,\n    scope = ''\n  } = config;\n  const {\n    cache: {\n      instanceId\n    },\n    container,\n    hashPriority\n  } = useContext(StyleContext);\n  const {\n    _tokenKey: tokenKey\n  } = token;\n  const stylePath = [...config.path, key, scope, tokenKey];\n  const cache = useGlobalCache(CSS_VAR_PREFIX, stylePath, () => {\n    const originToken = fn();\n    const [mergedToken, cssVarsStr] = transformToken(originToken, key, {\n      prefix,\n      unitless,\n      ignore,\n      scope,\n      hashPriority,\n      hashCls: hashId\n    });\n    const styleId = uniqueHash(stylePath, cssVarsStr);\n    return [mergedToken, cssVarsStr, styleId, key];\n  }, ([,, styleId]) => {\n    if (isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK,\n        attachTo: container\n      });\n    }\n  }, ([, cssVarsStr, styleId]) => {\n    if (!cssVarsStr) {\n      return;\n    }\n    const style = updateCSS(cssVarsStr, styleId, {\n      mark: ATTR_MARK,\n      prepend: 'queue',\n      attachTo: container,\n      priority: -999\n    });\n    style[CSS_IN_JS_INSTANCE] = instanceId;\n\n    // Used for `useCacheToken` to remove on batch when token removed\n    style.setAttribute(ATTR_TOKEN, key);\n  });\n  return cache;\n};\nexport const extract = (cache, effectStyles, options) => {\n  const [, styleStr, styleId, cssVarKey] = cache;\n  const {\n    plain\n  } = options || {};\n  if (!styleStr) {\n    return null;\n  }\n  const order = -999;\n\n  // ====================== Style ======================\n  // Used for @rc-component/util\n  const sharedAttrs = {\n    'data-rc-order': 'prependQueue',\n    'data-rc-priority': `${order}`\n  };\n  const styleText = toStyleStr(styleStr, cssVarKey, styleId, sharedAttrs, plain);\n  return [order, styleId, styleText];\n};\nexport default useCSSVarRegister;"],"mappings":"AAAA,SAASA,SAAS,EAAEC,SAAS,QAAQ,sCAAsC;AAC3E,SAASC,UAAU,QAAQ,OAAO;AAClC,OAAOC,YAAY,IAAIC,SAAS,EAAEC,UAAU,EAAEC,kBAAkB,QAAQ,iBAAiB;AACzF,SAASC,YAAY,EAAEC,UAAU,QAAQ,SAAS;AAClD,SAASC,cAAc,QAAQ,uBAAuB;AACtD,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,OAAO,MAAMC,cAAc,GAAG,QAAQ;AACtC,MAAMC,iBAAiB,GAAGA,CAACC,MAAM,EAAEC,EAAE,KAAK;EACxC,MAAM;IACJC,GAAG;IACHC,MAAM;IACNC,QAAQ;IACRC,MAAM;IACNC,KAAK;IACLC,MAAM;IACNC,KAAK,GAAG;EACV,CAAC,GAAGR,MAAM;EACV,MAAM;IACJS,KAAK,EAAE;MACLC;IACF,CAAC;IACDC,SAAS;IACTC;EACF,CAAC,GAAGxB,UAAU,CAACC,YAAY,CAAC;EAC5B,MAAM;IACJwB,SAAS,EAAEC;EACb,CAAC,GAAGR,KAAK;EACT,MAAMS,SAAS,GAAG,CAAC,GAAGf,MAAM,CAACgB,IAAI,EAAEd,GAAG,EAAEM,KAAK,EAAEM,QAAQ,CAAC;EACxD,MAAML,KAAK,GAAGb,cAAc,CAACE,cAAc,EAAEiB,SAAS,EAAE,MAAM;IAC5D,MAAME,WAAW,GAAGhB,EAAE,CAAC,CAAC;IACxB,MAAM,CAACiB,WAAW,EAAEC,UAAU,CAAC,GAAGxB,cAAc,CAACsB,WAAW,EAAEf,GAAG,EAAE;MACjEC,MAAM;MACNC,QAAQ;MACRC,MAAM;MACNG,KAAK;MACLI,YAAY;MACZQ,OAAO,EAAEb;IACX,CAAC,CAAC;IACF,MAAMc,OAAO,GAAGxB,UAAU,CAACkB,SAAS,EAAEI,UAAU,CAAC;IACjD,OAAO,CAACD,WAAW,EAAEC,UAAU,EAAEE,OAAO,EAAEnB,GAAG,CAAC;EAChD,CAAC,EAAEoB,IAAA,IAAkB;IAAA,IAAjB,IAAID,OAAO,CAAC,GAAAC,IAAA;IACd,IAAI7B,YAAY,EAAE;MAChBP,SAAS,CAACmC,OAAO,EAAE;QACjBE,IAAI,EAAEjC,SAAS;QACfkC,QAAQ,EAAEb;MACZ,CAAC,CAAC;IACJ;EACF,CAAC,EAAEc,KAAA,IAA6B;IAAA,IAA5B,GAAGN,UAAU,EAAEE,OAAO,CAAC,GAAAI,KAAA;IACzB,IAAI,CAACN,UAAU,EAAE;MACf;IACF;IACA,MAAMO,KAAK,GAAGvC,SAAS,CAACgC,UAAU,EAAEE,OAAO,EAAE;MAC3CE,IAAI,EAAEjC,SAAS;MACfqC,OAAO,EAAE,OAAO;MAChBH,QAAQ,EAAEb,SAAS;MACnBiB,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC;IACFF,KAAK,CAAClC,kBAAkB,CAAC,GAAGkB,UAAU;;IAEtC;IACAgB,KAAK,CAACG,YAAY,CAACtC,UAAU,EAAEW,GAAG,CAAC;EACrC,CAAC,CAAC;EACF,OAAOO,KAAK;AACd,CAAC;AACD,OAAO,MAAMqB,OAAO,GAAGA,CAACrB,KAAK,EAAEsB,YAAY,EAAEC,OAAO,KAAK;EACvD,MAAM,GAAGC,QAAQ,EAAEZ,OAAO,EAAEa,SAAS,CAAC,GAAGzB,KAAK;EAC9C,MAAM;IACJ0B;EACF,CAAC,GAAGH,OAAO,IAAI,CAAC,CAAC;EACjB,IAAI,CAACC,QAAQ,EAAE;IACb,OAAO,IAAI;EACb;EACA,MAAMG,KAAK,GAAG,CAAC,GAAG;;EAElB;EACA;EACA,MAAMC,WAAW,GAAG;IAClB,eAAe,EAAE,cAAc;IAC/B,kBAAkB,KAAAC,MAAA,CAAKF,KAAK;EAC9B,CAAC;EACD,MAAMG,SAAS,GAAG7C,UAAU,CAACuC,QAAQ,EAAEC,SAAS,EAAEb,OAAO,EAAEgB,WAAW,EAAEF,KAAK,CAAC;EAC9E,OAAO,CAACC,KAAK,EAAEf,OAAO,EAAEkB,SAAS,CAAC;AACpC,CAAC;AACD,eAAexC,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
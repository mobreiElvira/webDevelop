{"ast":null,"code":"import useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { collectScroller, getWin } from \"../util\";\nexport default function useWatch(open, target, popup, onAlign, onScroll) {\n  useLayoutEffect(() => {\n    if (open && target && popup) {\n      const targetElement = target;\n      const popupElement = popup;\n      const targetScrollList = collectScroller(targetElement);\n      const popupScrollList = collectScroller(popupElement);\n      const win = getWin(popupElement);\n      const mergedList = new Set([win, ...targetScrollList, ...popupScrollList]);\n      function notifyScroll() {\n        onAlign();\n        onScroll();\n      }\n      mergedList.forEach(scroller => {\n        scroller.addEventListener('scroll', notifyScroll, {\n          passive: true\n        });\n      });\n      win.addEventListener('resize', notifyScroll, {\n        passive: true\n      });\n\n      // First time always do align\n      onAlign();\n      return () => {\n        mergedList.forEach(scroller => {\n          scroller.removeEventListener('scroll', notifyScroll);\n          win.removeEventListener('resize', notifyScroll);\n        });\n      };\n    }\n  }, [open, target, popup]);\n}","map":{"version":3,"names":["useLayoutEffect","collectScroller","getWin","useWatch","open","target","popup","onAlign","onScroll","targetElement","popupElement","targetScrollList","popupScrollList","win","mergedList","Set","notifyScroll","forEach","scroller","addEventListener","passive","removeEventListener"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/trigger/es/hooks/useWatch.js"],"sourcesContent":["import useLayoutEffect from \"@rc-component/util/es/hooks/useLayoutEffect\";\nimport { collectScroller, getWin } from \"../util\";\nexport default function useWatch(open, target, popup, onAlign, onScroll) {\n  useLayoutEffect(() => {\n    if (open && target && popup) {\n      const targetElement = target;\n      const popupElement = popup;\n      const targetScrollList = collectScroller(targetElement);\n      const popupScrollList = collectScroller(popupElement);\n      const win = getWin(popupElement);\n      const mergedList = new Set([win, ...targetScrollList, ...popupScrollList]);\n      function notifyScroll() {\n        onAlign();\n        onScroll();\n      }\n      mergedList.forEach(scroller => {\n        scroller.addEventListener('scroll', notifyScroll, {\n          passive: true\n        });\n      });\n      win.addEventListener('resize', notifyScroll, {\n        passive: true\n      });\n\n      // First time always do align\n      onAlign();\n      return () => {\n        mergedList.forEach(scroller => {\n          scroller.removeEventListener('scroll', notifyScroll);\n          win.removeEventListener('resize', notifyScroll);\n        });\n      };\n    }\n  }, [open, target, popup]);\n}"],"mappings":"AAAA,OAAOA,eAAe,MAAM,6CAA6C;AACzE,SAASC,eAAe,EAAEC,MAAM,QAAQ,SAAS;AACjD,eAAe,SAASC,QAAQA,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EACvER,eAAe,CAAC,MAAM;IACpB,IAAII,IAAI,IAAIC,MAAM,IAAIC,KAAK,EAAE;MAC3B,MAAMG,aAAa,GAAGJ,MAAM;MAC5B,MAAMK,YAAY,GAAGJ,KAAK;MAC1B,MAAMK,gBAAgB,GAAGV,eAAe,CAACQ,aAAa,CAAC;MACvD,MAAMG,eAAe,GAAGX,eAAe,CAACS,YAAY,CAAC;MACrD,MAAMG,GAAG,GAAGX,MAAM,CAACQ,YAAY,CAAC;MAChC,MAAMI,UAAU,GAAG,IAAIC,GAAG,CAAC,CAACF,GAAG,EAAE,GAAGF,gBAAgB,EAAE,GAAGC,eAAe,CAAC,CAAC;MAC1E,SAASI,YAAYA,CAAA,EAAG;QACtBT,OAAO,CAAC,CAAC;QACTC,QAAQ,CAAC,CAAC;MACZ;MACAM,UAAU,CAACG,OAAO,CAACC,QAAQ,IAAI;QAC7BA,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,EAAEH,YAAY,EAAE;UAChDI,OAAO,EAAE;QACX,CAAC,CAAC;MACJ,CAAC,CAAC;MACFP,GAAG,CAACM,gBAAgB,CAAC,QAAQ,EAAEH,YAAY,EAAE;QAC3CI,OAAO,EAAE;MACX,CAAC,CAAC;;MAEF;MACAb,OAAO,CAAC,CAAC;MACT,OAAO,MAAM;QACXO,UAAU,CAACG,OAAO,CAACC,QAAQ,IAAI;UAC7BA,QAAQ,CAACG,mBAAmB,CAAC,QAAQ,EAAEL,YAAY,CAAC;UACpDH,GAAG,CAACQ,mBAAmB,CAAC,QAAQ,EAAEL,YAAY,CAAC;QACjD,CAAC,CAAC;MACJ,CAAC;IACH;EACF,CAAC,EAAE,CAACZ,IAAI,EAAEC,MAAM,EAAEC,KAAK,CAAC,CAAC;AAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import warning from \"@rc-component/util/es/warning\";\nimport * as React from 'react';\nimport { INTERNAL_HOOKS } from \"../constant\";\nimport { findAllChildrenKeys, renderExpandIcon } from \"../utils/expandUtil\";\nimport { getExpandableProps } from \"../utils/legacyUtil\";\nexport default function useExpand(props, mergedData, getRowKey) {\n  const expandableConfig = getExpandableProps(props);\n  const {\n    expandIcon,\n    expandedRowKeys,\n    defaultExpandedRowKeys,\n    defaultExpandAllRows,\n    expandedRowRender,\n    onExpand,\n    onExpandedRowsChange,\n    childrenColumnName\n  } = expandableConfig;\n  const mergedExpandIcon = expandIcon || renderExpandIcon;\n  const mergedChildrenColumnName = childrenColumnName || 'children';\n  const expandableType = React.useMemo(() => {\n    if (expandedRowRender) {\n      return 'row';\n    }\n    /* eslint-disable no-underscore-dangle */\n    /**\n     * Fix https://github.com/ant-design/ant-design/issues/21154\n     * This is a workaround to not to break current behavior.\n     * We can remove follow code after final release.\n     *\n     * To other developer:\n     *  Do not use `__PARENT_RENDER_ICON__` in prod since we will remove this when refactor\n     */\n    if (props.expandable && props.internalHooks === INTERNAL_HOOKS && props.expandable.__PARENT_RENDER_ICON__ || mergedData.some(record => record && typeof record === 'object' && record[mergedChildrenColumnName])) {\n      return 'nest';\n    }\n    /* eslint-enable */\n    return false;\n  }, [!!expandedRowRender, mergedData]);\n  const [innerExpandedKeys, setInnerExpandedKeys] = React.useState(() => {\n    if (defaultExpandedRowKeys) {\n      return defaultExpandedRowKeys;\n    }\n    if (defaultExpandAllRows) {\n      return findAllChildrenKeys(mergedData, getRowKey, mergedChildrenColumnName);\n    }\n    return [];\n  });\n  const mergedExpandedKeys = React.useMemo(() => new Set(expandedRowKeys || innerExpandedKeys || []), [expandedRowKeys, innerExpandedKeys]);\n  const onTriggerExpand = React.useCallback(record => {\n    const key = getRowKey(record, mergedData.indexOf(record));\n    let newExpandedKeys;\n    const hasKey = mergedExpandedKeys.has(key);\n    if (hasKey) {\n      mergedExpandedKeys.delete(key);\n      newExpandedKeys = [...mergedExpandedKeys];\n    } else {\n      newExpandedKeys = [...mergedExpandedKeys, key];\n    }\n    setInnerExpandedKeys(newExpandedKeys);\n    if (onExpand) {\n      onExpand(!hasKey, record);\n    }\n    if (onExpandedRowsChange) {\n      onExpandedRowsChange(newExpandedKeys);\n    }\n  }, [getRowKey, mergedExpandedKeys, mergedData, onExpand, onExpandedRowsChange]);\n\n  // Warning if use `expandedRowRender` and nest children in the same time\n  if (process.env.NODE_ENV !== 'production' && expandedRowRender && mergedData.some(record => {\n    return Array.isArray(record === null || record === void 0 ? void 0 : record[mergedChildrenColumnName]);\n  })) {\n    warning(false, '`expandedRowRender` should not use with nested Table');\n  }\n  return [expandableConfig, expandableType, mergedExpandedKeys, mergedExpandIcon, mergedChildrenColumnName, onTriggerExpand];\n}","map":{"version":3,"names":["warning","React","INTERNAL_HOOKS","findAllChildrenKeys","renderExpandIcon","getExpandableProps","useExpand","props","mergedData","getRowKey","expandableConfig","expandIcon","expandedRowKeys","defaultExpandedRowKeys","defaultExpandAllRows","expandedRowRender","onExpand","onExpandedRowsChange","childrenColumnName","mergedExpandIcon","mergedChildrenColumnName","expandableType","useMemo","expandable","internalHooks","__PARENT_RENDER_ICON__","some","record","innerExpandedKeys","setInnerExpandedKeys","useState","mergedExpandedKeys","Set","onTriggerExpand","useCallback","key","indexOf","newExpandedKeys","hasKey","has","delete","process","env","NODE_ENV","Array","isArray"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/table/es/hooks/useExpand.js"],"sourcesContent":["import warning from \"@rc-component/util/es/warning\";\nimport * as React from 'react';\nimport { INTERNAL_HOOKS } from \"../constant\";\nimport { findAllChildrenKeys, renderExpandIcon } from \"../utils/expandUtil\";\nimport { getExpandableProps } from \"../utils/legacyUtil\";\nexport default function useExpand(props, mergedData, getRowKey) {\n  const expandableConfig = getExpandableProps(props);\n  const {\n    expandIcon,\n    expandedRowKeys,\n    defaultExpandedRowKeys,\n    defaultExpandAllRows,\n    expandedRowRender,\n    onExpand,\n    onExpandedRowsChange,\n    childrenColumnName\n  } = expandableConfig;\n  const mergedExpandIcon = expandIcon || renderExpandIcon;\n  const mergedChildrenColumnName = childrenColumnName || 'children';\n  const expandableType = React.useMemo(() => {\n    if (expandedRowRender) {\n      return 'row';\n    }\n    /* eslint-disable no-underscore-dangle */\n    /**\n     * Fix https://github.com/ant-design/ant-design/issues/21154\n     * This is a workaround to not to break current behavior.\n     * We can remove follow code after final release.\n     *\n     * To other developer:\n     *  Do not use `__PARENT_RENDER_ICON__` in prod since we will remove this when refactor\n     */\n    if (props.expandable && props.internalHooks === INTERNAL_HOOKS && props.expandable.__PARENT_RENDER_ICON__ || mergedData.some(record => record && typeof record === 'object' && record[mergedChildrenColumnName])) {\n      return 'nest';\n    }\n    /* eslint-enable */\n    return false;\n  }, [!!expandedRowRender, mergedData]);\n  const [innerExpandedKeys, setInnerExpandedKeys] = React.useState(() => {\n    if (defaultExpandedRowKeys) {\n      return defaultExpandedRowKeys;\n    }\n    if (defaultExpandAllRows) {\n      return findAllChildrenKeys(mergedData, getRowKey, mergedChildrenColumnName);\n    }\n    return [];\n  });\n  const mergedExpandedKeys = React.useMemo(() => new Set(expandedRowKeys || innerExpandedKeys || []), [expandedRowKeys, innerExpandedKeys]);\n  const onTriggerExpand = React.useCallback(record => {\n    const key = getRowKey(record, mergedData.indexOf(record));\n    let newExpandedKeys;\n    const hasKey = mergedExpandedKeys.has(key);\n    if (hasKey) {\n      mergedExpandedKeys.delete(key);\n      newExpandedKeys = [...mergedExpandedKeys];\n    } else {\n      newExpandedKeys = [...mergedExpandedKeys, key];\n    }\n    setInnerExpandedKeys(newExpandedKeys);\n    if (onExpand) {\n      onExpand(!hasKey, record);\n    }\n    if (onExpandedRowsChange) {\n      onExpandedRowsChange(newExpandedKeys);\n    }\n  }, [getRowKey, mergedExpandedKeys, mergedData, onExpand, onExpandedRowsChange]);\n\n  // Warning if use `expandedRowRender` and nest children in the same time\n  if (process.env.NODE_ENV !== 'production' && expandedRowRender && mergedData.some(record => {\n    return Array.isArray(record?.[mergedChildrenColumnName]);\n  })) {\n    warning(false, '`expandedRowRender` should not use with nested Table');\n  }\n  return [expandableConfig, expandableType, mergedExpandedKeys, mergedExpandIcon, mergedChildrenColumnName, onTriggerExpand];\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
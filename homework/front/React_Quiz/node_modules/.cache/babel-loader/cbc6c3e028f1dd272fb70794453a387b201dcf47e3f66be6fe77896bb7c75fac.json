{"ast":null,"code":"function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport { supportRef } from \"@rc-component/util/es/ref\";\nimport * as React from 'react';\n/**\n * Create Immutable pair for `makeImmutable` and `responseImmutable`.\n */\nexport default function createImmutable() {\n  const ImmutableContext = /*#__PURE__*/React.createContext(null);\n\n  /**\n   * Get render update mark by `makeImmutable` root.\n   * Do not deps on the return value as render times\n   * but only use for `useMemo` or `useCallback` deps.\n   */\n  function useImmutableMark() {\n    return React.useContext(ImmutableContext);\n  }\n\n  /**\n  * Wrapped Component will be marked as Immutable.\n  * When Component parent trigger render,\n  * it will notice children component (use with `responseImmutable`) node that parent has updated.\n  * @param Component Passed Component\n  * @param triggerRender Customize trigger `responseImmutable` children re-render logic. Default will always trigger re-render when this component re-render.\n  */\n  function makeImmutable(Component, shouldTriggerRender) {\n    const refAble = supportRef(Component);\n    const ImmutableComponent = (props, ref) => {\n      const refProps = refAble ? {\n        ref\n      } : {};\n      const renderTimesRef = React.useRef(0);\n      const prevProps = React.useRef(props);\n\n      // If parent has the context, we do not wrap it\n      const mark = useImmutableMark();\n      if (mark !== null) {\n        return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n      }\n      if (\n      // Always trigger re-render if `shouldTriggerRender` is not provided\n      !shouldTriggerRender || shouldTriggerRender(prevProps.current, props)) {\n        renderTimesRef.current += 1;\n      }\n      prevProps.current = props;\n      return /*#__PURE__*/React.createElement(ImmutableContext.Provider, {\n        value: renderTimesRef.current\n      }, /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps)));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableRoot(\".concat(Component.displayName || Component.name, \")\");\n    }\n    return refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent;\n  }\n\n  /**\n   * Wrapped Component with `React.memo`.\n   * But will rerender when parent with `makeImmutable` rerender.\n   */\n  function responseImmutable(Component, propsAreEqual) {\n    const refAble = supportRef(Component);\n    const ImmutableComponent = (props, ref) => {\n      const refProps = refAble ? {\n        ref\n      } : {};\n      useImmutableMark();\n      return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = \"ImmutableResponse(\".concat(Component.displayName || Component.name, \")\");\n    }\n    return /*#__PURE__*/React.memo(refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent, propsAreEqual);\n  }\n  return {\n    makeImmutable,\n    responseImmutable,\n    useImmutableMark\n  };\n}","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","supportRef","React","createImmutable","ImmutableContext","createContext","useImmutableMark","useContext","makeImmutable","Component","shouldTriggerRender","refAble","ImmutableComponent","props","ref","refProps","renderTimesRef","useRef","prevProps","mark","createElement","current","Provider","value","process","env","NODE_ENV","displayName","concat","name","forwardRef","responseImmutable","propsAreEqual","memo"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/context/es/Immutable.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { supportRef } from \"@rc-component/util/es/ref\";\nimport * as React from 'react';\n/**\n * Create Immutable pair for `makeImmutable` and `responseImmutable`.\n */\nexport default function createImmutable() {\n  const ImmutableContext = /*#__PURE__*/React.createContext(null);\n\n  /**\n   * Get render update mark by `makeImmutable` root.\n   * Do not deps on the return value as render times\n   * but only use for `useMemo` or `useCallback` deps.\n   */\n  function useImmutableMark() {\n    return React.useContext(ImmutableContext);\n  }\n\n  /**\n  * Wrapped Component will be marked as Immutable.\n  * When Component parent trigger render,\n  * it will notice children component (use with `responseImmutable`) node that parent has updated.\n  * @param Component Passed Component\n  * @param triggerRender Customize trigger `responseImmutable` children re-render logic. Default will always trigger re-render when this component re-render.\n  */\n  function makeImmutable(Component, shouldTriggerRender) {\n    const refAble = supportRef(Component);\n    const ImmutableComponent = (props, ref) => {\n      const refProps = refAble ? {\n        ref\n      } : {};\n      const renderTimesRef = React.useRef(0);\n      const prevProps = React.useRef(props);\n\n      // If parent has the context, we do not wrap it\n      const mark = useImmutableMark();\n      if (mark !== null) {\n        return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n      }\n      if (\n      // Always trigger re-render if `shouldTriggerRender` is not provided\n      !shouldTriggerRender || shouldTriggerRender(prevProps.current, props)) {\n        renderTimesRef.current += 1;\n      }\n      prevProps.current = props;\n      return /*#__PURE__*/React.createElement(ImmutableContext.Provider, {\n        value: renderTimesRef.current\n      }, /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps)));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = `ImmutableRoot(${Component.displayName || Component.name})`;\n    }\n    return refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent;\n  }\n\n  /**\n   * Wrapped Component with `React.memo`.\n   * But will rerender when parent with `makeImmutable` rerender.\n   */\n  function responseImmutable(Component, propsAreEqual) {\n    const refAble = supportRef(Component);\n    const ImmutableComponent = (props, ref) => {\n      const refProps = refAble ? {\n        ref\n      } : {};\n      useImmutableMark();\n      return /*#__PURE__*/React.createElement(Component, _extends({}, props, refProps));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      ImmutableComponent.displayName = `ImmutableResponse(${Component.displayName || Component.name})`;\n    }\n    return /*#__PURE__*/React.memo(refAble ? /*#__PURE__*/React.forwardRef(ImmutableComponent) : ImmutableComponent, propsAreEqual);\n  }\n  return {\n    makeImmutable,\n    responseImmutable,\n    useImmutableMark\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nconst _excluded = [\"id\", \"prefixCls\", \"className\", \"styles\", \"classNames\", \"showSearch\", \"tagRender\", \"showScrollBar\", \"direction\", \"omitDomProps\", \"displayValues\", \"onDisplayValuesChange\", \"emptyOptions\", \"notFoundContent\", \"onClear\", \"maxCount\", \"placeholder\", \"mode\", \"disabled\", \"loading\", \"getInputElement\", \"getRawInputElement\", \"open\", \"defaultOpen\", \"onPopupVisibleChange\", \"activeValue\", \"onActiveValueChange\", \"activeDescendantId\", \"searchValue\", \"autoClearSearchValue\", \"onSearch\", \"onSearchSplit\", \"tokenSeparators\", \"allowClear\", \"prefix\", \"suffix\", \"suffixIcon\", \"clearIcon\", \"OptionList\", \"animation\", \"transitionName\", \"popupStyle\", \"popupClassName\", \"popupMatchSelectWidth\", \"popupRender\", \"popupAlign\", \"placement\", \"builtinPlacements\", \"getPopupContainer\", \"showAction\", \"onFocus\", \"onBlur\", \"onKeyUp\", \"onKeyDown\", \"onMouseDown\", \"components\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport { clsx } from 'clsx';\nimport { getDOM } from \"@rc-component/util/es/Dom/findDOMNode\";\nimport * as React from 'react';\nimport { useAllowClear } from \"../hooks/useAllowClear\";\nimport { BaseSelectContext } from \"../hooks/useBaseProps\";\nimport useLock from \"../hooks/useLock\";\nimport useSelectTriggerControl, { isInside } from \"../hooks/useSelectTriggerControl\";\nimport SelectTrigger from \"../SelectTrigger\";\nimport { getSeparatedContent, isValidCount } from \"../utils/valueUtil\";\nimport Polite from \"./Polite\";\nimport useOpen, { macroTask } from \"../hooks/useOpen\";\nimport { useEvent } from '@rc-component/util';\nimport SelectInput from \"../SelectInput\";\nimport useComponents from \"../hooks/useComponents\";\n\n/**\n * ZombieJ:\n * We are currently refactoring the semantic structure of the component. Changelog:\n * - Remove `suffixIcon` and change to `suffix`.\n * - Add `components.root` for replacing response element.\n *   - Remove `getInputElement` and `getRawInputElement` since we can use `components.input` instead.\n */\n\nexport const isMultiple = mode => mode === 'tags' || mode === 'multiple';\nconst BaseSelect = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n      id,\n      prefixCls,\n      className,\n      styles,\n      classNames,\n      showSearch,\n      tagRender,\n      showScrollBar = 'optional',\n      direction,\n      omitDomProps,\n      // Value\n      displayValues,\n      onDisplayValuesChange,\n      emptyOptions,\n      notFoundContent = 'Not Found',\n      onClear,\n      maxCount,\n      placeholder,\n      // Mode\n      mode,\n      // Status\n      disabled,\n      loading,\n      // Customize Input\n      getInputElement,\n      getRawInputElement,\n      // Open\n      open,\n      defaultOpen,\n      onPopupVisibleChange,\n      // Active\n      activeValue,\n      onActiveValueChange,\n      activeDescendantId,\n      // Search\n      searchValue,\n      autoClearSearchValue,\n      onSearch,\n      onSearchSplit,\n      tokenSeparators,\n      // Icons\n      allowClear,\n      prefix,\n      suffix,\n      suffixIcon,\n      clearIcon,\n      // Dropdown\n      OptionList,\n      animation,\n      transitionName,\n      popupStyle,\n      popupClassName,\n      popupMatchSelectWidth,\n      popupRender,\n      popupAlign,\n      placement,\n      builtinPlacements,\n      getPopupContainer,\n      // Focus\n      showAction = [],\n      onFocus,\n      onBlur,\n      // Rest Events\n      onKeyUp,\n      onKeyDown,\n      onMouseDown,\n      // Components\n      components\n      // Rest Props\n    } = props,\n    restProps = _objectWithoutProperties(props, _excluded);\n\n  // ============================== MISC ==============================\n  const multiple = isMultiple(mode);\n\n  // ============================== Refs ==============================\n  const containerRef = React.useRef(null);\n  const triggerRef = React.useRef(null);\n  const listRef = React.useRef(null);\n\n  /** Used for component focused management */\n  const [focused, setFocused] = React.useState(false);\n\n  // =========================== Imperative ===========================\n  React.useImperativeHandle(ref, () => {\n    var _containerRef$current, _containerRef$current2;\n    return {\n      focus: (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.focus,\n      blur: (_containerRef$current2 = containerRef.current) === null || _containerRef$current2 === void 0 ? void 0 : _containerRef$current2.blur,\n      scrollTo: arg => {\n        var _listRef$current;\n        return (_listRef$current = listRef.current) === null || _listRef$current === void 0 ? void 0 : _listRef$current.scrollTo(arg);\n      },\n      nativeElement: getDOM(containerRef.current)\n    };\n  });\n\n  // =========================== Components ===========================\n  const mergedComponents = useComponents(components, getInputElement, getRawInputElement);\n\n  // ========================== Search Value ==========================\n  const mergedSearchValue = React.useMemo(() => {\n    var _displayValues$;\n    if (mode !== 'combobox') {\n      return searchValue;\n    }\n    const val = (_displayValues$ = displayValues[0]) === null || _displayValues$ === void 0 ? void 0 : _displayValues$.value;\n    return typeof val === 'string' || typeof val === 'number' ? String(val) : '';\n  }, [searchValue, mode, displayValues]);\n\n  // ========================== Custom Input ==========================\n  // Only works in `combobox`\n  const customizeInputElement = mode === 'combobox' && typeof getInputElement === 'function' && getInputElement() || null;\n\n  // ============================== Open ==============================\n  // Not trigger `open` when `notFoundContent` is empty\n  const emptyListContent = !notFoundContent && emptyOptions;\n  const [mergedOpen, triggerOpen] = useOpen(open, onPopupVisibleChange, nextOpen => disabled || emptyListContent ? false : nextOpen);\n\n  // ============================= Search =============================\n  const tokenWithEnter = React.useMemo(() => (tokenSeparators || []).some(tokenSeparator => ['\\n', '\\r\\n'].includes(tokenSeparator)), [tokenSeparators]);\n  const onInternalSearch = (searchText, fromTyping, isCompositing) => {\n    if (multiple && isValidCount(maxCount) && displayValues.length >= maxCount) {\n      return;\n    }\n    let ret = true;\n    let newSearchText = searchText;\n    onActiveValueChange === null || onActiveValueChange === void 0 || onActiveValueChange(null);\n    const separatedList = getSeparatedContent(searchText, tokenSeparators, isValidCount(maxCount) ? maxCount - displayValues.length : undefined);\n\n    // Check if match the `tokenSeparators`\n    const patchLabels = isCompositing ? null : separatedList;\n\n    // Ignore combobox since it's not split-able\n    if (mode !== 'combobox' && patchLabels) {\n      newSearchText = '';\n      onSearchSplit === null || onSearchSplit === void 0 || onSearchSplit(patchLabels);\n\n      // Should close when paste finish\n      triggerOpen(false);\n\n      // Tell Selector that break next actions\n      ret = false;\n    }\n    if (onSearch && mergedSearchValue !== newSearchText) {\n      onSearch(newSearchText, {\n        source: fromTyping ? 'typing' : 'effect'\n      });\n    }\n\n    // Open if from typing\n    if (searchText && fromTyping && ret) {\n      triggerOpen(true);\n    }\n    return ret;\n  };\n\n  // Only triggered when menu is closed & mode is tags\n  // If menu is open, OptionList will take charge\n  // If mode isn't tags, press enter is not meaningful when you can't see any option\n  const onInternalSearchSubmit = searchText => {\n    // prevent empty tags from appearing when you click the Enter button\n    if (!searchText || !searchText.trim()) {\n      return;\n    }\n    onSearch(searchText, {\n      source: 'submit'\n    });\n  };\n\n  // Close will clean up single mode search text\n  React.useEffect(() => {\n    if (!mergedOpen && !multiple && mode !== 'combobox') {\n      onInternalSearch('', false, false);\n    }\n  }, [mergedOpen]);\n\n  // ============================ Disabled ============================\n  // Close dropdown & remove focus state when disabled change\n  React.useEffect(() => {\n    // After onBlur is triggered, the focused does not need to be reset\n    if (disabled) {\n      triggerOpen(false);\n      setFocused(false);\n    }\n  }, [disabled, mergedOpen]);\n\n  // ============================ Keyboard ============================\n  /**\n   * We record input value here to check if can press to clean up by backspace\n   * - null: Key is not down, this is reset by key up\n   * - true: Search text is empty when first time backspace down\n   * - false: Search text is not empty when first time backspace down\n   */\n  const [getClearLock, setClearLock] = useLock();\n  const keyLockRef = React.useRef(false);\n\n  // KeyDown\n  const onInternalKeyDown = event => {\n    const clearLock = getClearLock();\n    const {\n      key\n    } = event;\n    const isEnterKey = key === 'Enter';\n    if (isEnterKey) {\n      // Do not submit form when type in the input\n      if (mode !== 'combobox') {\n        event.preventDefault();\n      }\n\n      // We only manage open state here, close logic should handle by list component\n      if (!mergedOpen) {\n        triggerOpen(true);\n      }\n    }\n    setClearLock(!!mergedSearchValue);\n\n    // Remove value by `backspace`\n    if (key === 'Backspace' && !clearLock && multiple && !mergedSearchValue && displayValues.length) {\n      const cloneDisplayValues = [...displayValues];\n      let removedDisplayValue = null;\n      for (let i = cloneDisplayValues.length - 1; i >= 0; i -= 1) {\n        const current = cloneDisplayValues[i];\n        if (!current.disabled) {\n          cloneDisplayValues.splice(i, 1);\n          removedDisplayValue = current;\n          break;\n        }\n      }\n      if (removedDisplayValue) {\n        onDisplayValuesChange(cloneDisplayValues, {\n          type: 'remove',\n          values: [removedDisplayValue]\n        });\n      }\n    }\n    if (mergedOpen && (!isEnterKey || !keyLockRef.current)) {\n      var _listRef$current2;\n      // Lock the Enter key after it is pressed to avoid repeated triggering of the onChange event.\n      if (isEnterKey) {\n        keyLockRef.current = true;\n      }\n      (_listRef$current2 = listRef.current) === null || _listRef$current2 === void 0 || _listRef$current2.onKeyDown(event);\n    }\n    onKeyDown === null || onKeyDown === void 0 || onKeyDown(event);\n  };\n\n  // KeyUp\n  const onInternalKeyUp = function (event) {\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n    if (mergedOpen) {\n      var _listRef$current3;\n      (_listRef$current3 = listRef.current) === null || _listRef$current3 === void 0 || _listRef$current3.onKeyUp(event, ...rest);\n    }\n    if (event.key === 'Enter') {\n      keyLockRef.current = false;\n    }\n    onKeyUp === null || onKeyUp === void 0 || onKeyUp(event, ...rest);\n  };\n\n  // ============================ Selector ============================\n  const onSelectorRemove = useEvent(val => {\n    const newValues = displayValues.filter(i => i !== val);\n    onDisplayValuesChange(newValues, {\n      type: 'remove',\n      values: [val]\n    });\n  });\n  const onInputBlur = () => {\n    // Unlock the Enter key after the input blur; otherwise, the Enter key needs to be pressed twice to trigger the correct effect.\n    keyLockRef.current = false;\n  };\n\n  // ========================== Focus / Blur ==========================\n  const getSelectElements = () => {\n    var _triggerRef$current;\n    return [getDOM(containerRef.current), (_triggerRef$current = triggerRef.current) === null || _triggerRef$current === void 0 ? void 0 : _triggerRef$current.getPopupElement()];\n  };\n\n  // Close when click on non-select element\n  useSelectTriggerControl(getSelectElements, mergedOpen, triggerOpen, !!mergedComponents.root);\n\n  // ========================== Focus / Blur ==========================\n  /** Record real focus status */\n  // const focusRef = React.useRef<boolean>(false);\n\n  const onInternalFocus = event => {\n    setFocused(true);\n    if (!disabled) {\n      // `showAction` should handle `focus` if set\n      if (showAction.includes('focus')) {\n        triggerOpen(true);\n      }\n      onFocus === null || onFocus === void 0 || onFocus(event);\n    }\n  };\n  const onRootBlur = () => {\n    macroTask(() => {\n      if (!isInside(getSelectElements(), document.activeElement)) {\n        triggerOpen(false);\n      }\n    });\n  };\n  const onInternalBlur = event => {\n    setFocused(false);\n    if (mergedSearchValue) {\n      // `tags` mode should move `searchValue` into values\n      if (mode === 'tags') {\n        onSearch(mergedSearchValue, {\n          source: 'submit'\n        });\n      } else if (mode === 'multiple') {\n        // `multiple` mode only clean the search value but not trigger event\n        onSearch('', {\n          source: 'blur'\n        });\n      }\n    }\n    onRootBlur();\n    if (!disabled) {\n      onBlur === null || onBlur === void 0 || onBlur(event);\n    }\n  };\n  const onInternalMouseDown = function (event) {\n    var _triggerRef$current2;\n    const {\n      target\n    } = event;\n    const popupElement = (_triggerRef$current2 = triggerRef.current) === null || _triggerRef$current2 === void 0 ? void 0 : _triggerRef$current2.getPopupElement();\n\n    // We should give focus back to selector if clicked item is not focusable\n    if (popupElement !== null && popupElement !== void 0 && popupElement.contains(target) && triggerOpen) {\n      // Tell `open` not to close since it's safe in the popup\n      triggerOpen(true, {\n        ignoreNext: true\n      });\n    }\n    for (var _len2 = arguments.length, restArgs = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      restArgs[_key2 - 1] = arguments[_key2];\n    }\n    onMouseDown === null || onMouseDown === void 0 || onMouseDown(event, ...restArgs);\n  };\n\n  // ============================ Dropdown ============================\n  const [, forceUpdate] = React.useState({});\n  // We need force update here since popup dom is render async\n  function onPopupMouseEnter() {\n    forceUpdate({});\n  }\n\n  // Used for raw custom input trigger\n  let onTriggerVisibleChange;\n  if (!!mergedComponents.root) {\n    onTriggerVisibleChange = newOpen => {\n      triggerOpen(newOpen);\n    };\n  }\n\n  // ============================ Context =============================\n  const baseSelectContext = React.useMemo(() => _objectSpread(_objectSpread({}, props), {}, {\n    notFoundContent,\n    open: mergedOpen,\n    triggerOpen: mergedOpen,\n    id,\n    showSearch,\n    multiple,\n    toggleOpen: triggerOpen,\n    showScrollBar,\n    styles,\n    classNames\n  }), [props, notFoundContent, triggerOpen, id, showSearch, multiple, mergedOpen, showScrollBar, styles, classNames]);\n\n  // ==================================================================\n  // ==                            Render                            ==\n  // ==================================================================\n\n  // ============================= Suffix =============================\n  const mergedSuffixIcon = React.useMemo(() => {\n    const nextSuffix = suffix !== null && suffix !== void 0 ? suffix : suffixIcon;\n    if (typeof nextSuffix === 'function') {\n      return nextSuffix({\n        searchValue: mergedSearchValue,\n        open: mergedOpen,\n        focused,\n        showSearch,\n        loading\n      });\n    }\n    return nextSuffix;\n  }, [suffix, suffixIcon, mergedSearchValue, mergedOpen, focused, showSearch, loading]);\n\n  // ============================= Clear ==============================\n  const onClearMouseDown = () => {\n    var _containerRef$current3;\n    onClear === null || onClear === void 0 || onClear();\n    (_containerRef$current3 = containerRef.current) === null || _containerRef$current3 === void 0 || _containerRef$current3.focus();\n    onDisplayValuesChange([], {\n      type: 'clear',\n      values: displayValues\n    });\n    onInternalSearch('', false, false);\n  };\n  const {\n    allowClear: mergedAllowClear,\n    clearIcon: clearNode\n  } = useAllowClear(prefixCls, displayValues, allowClear, clearIcon, disabled, mergedSearchValue, mode);\n\n  // =========================== OptionList ===========================\n  const optionList = /*#__PURE__*/React.createElement(OptionList, {\n    ref: listRef\n  });\n\n  // ============================= Select =============================\n  const mergedClassName = clsx(prefixCls, className, {\n    [\"\".concat(prefixCls, \"-focused\")]: focused,\n    [\"\".concat(prefixCls, \"-multiple\")]: multiple,\n    [\"\".concat(prefixCls, \"-single\")]: !multiple,\n    [\"\".concat(prefixCls, \"-allow-clear\")]: mergedAllowClear,\n    [\"\".concat(prefixCls, \"-show-arrow\")]: mergedSuffixIcon !== undefined && mergedSuffixIcon !== null,\n    [\"\".concat(prefixCls, \"-disabled\")]: disabled,\n    [\"\".concat(prefixCls, \"-loading\")]: loading,\n    [\"\".concat(prefixCls, \"-open\")]: mergedOpen,\n    [\"\".concat(prefixCls, \"-customize-input\")]: customizeInputElement,\n    [\"\".concat(prefixCls, \"-show-search\")]: showSearch\n  });\n\n  // >>> Render\n  let renderNode = /*#__PURE__*/React.createElement(SelectInput, _extends({}, restProps, {\n    // Ref\n    ref: containerRef\n    // Style\n    ,\n\n    prefixCls: prefixCls,\n    className: mergedClassName\n    // Focus state\n    ,\n\n    focused: focused\n    // UI\n    ,\n\n    prefix: prefix,\n    suffix: mergedSuffixIcon,\n    clearIcon: clearNode\n    // Type or mode\n    ,\n\n    multiple: multiple,\n    mode: mode\n    // Values\n    ,\n\n    displayValues: displayValues,\n    placeholder: placeholder,\n    searchValue: mergedSearchValue,\n    activeValue: activeValue,\n    onSearch: onInternalSearch,\n    onSearchSubmit: onInternalSearchSubmit,\n    onInputBlur: onInputBlur,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur,\n    onClearMouseDown: onClearMouseDown,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onSelectorRemove: onSelectorRemove\n    // Token handling\n    ,\n\n    tokenWithEnter: tokenWithEnter\n    // Open\n    ,\n\n    onMouseDown: onInternalMouseDown\n    // Components\n    ,\n\n    components: mergedComponents\n  }));\n  renderNode = /*#__PURE__*/React.createElement(SelectTrigger, {\n    ref: triggerRef,\n    disabled: disabled,\n    prefixCls: prefixCls,\n    visible: mergedOpen,\n    popupElement: optionList,\n    animation: animation,\n    transitionName: transitionName,\n    popupStyle: popupStyle,\n    popupClassName: popupClassName,\n    direction: direction,\n    popupMatchSelectWidth: popupMatchSelectWidth,\n    popupRender: popupRender,\n    popupAlign: popupAlign,\n    placement: placement,\n    builtinPlacements: builtinPlacements,\n    getPopupContainer: getPopupContainer,\n    empty: emptyOptions,\n    onPopupVisibleChange: onTriggerVisibleChange,\n    onPopupMouseEnter: onPopupMouseEnter,\n    onPopupMouseDown: onInternalMouseDown,\n    onPopupBlur: onRootBlur\n  }, renderNode);\n  return /*#__PURE__*/React.createElement(BaseSelectContext.Provider, {\n    value: baseSelectContext\n  }, /*#__PURE__*/React.createElement(Polite, {\n    visible: focused && !mergedOpen,\n    values: displayValues\n  }), renderNode);\n});\n\n// Set display name for dev\nif (process.env.NODE_ENV !== 'production') {\n  BaseSelect.displayName = 'BaseSelect';\n}\nexport default BaseSelect;","map":{"version":3,"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","clsx","getDOM","React","useAllowClear","BaseSelectContext","useLock","useSelectTriggerControl","isInside","SelectTrigger","getSeparatedContent","isValidCount","Polite","useOpen","macroTask","useEvent","SelectInput","useComponents","isMultiple","mode","BaseSelect","forwardRef","props","ref","id","prefixCls","className","styles","classNames","showSearch","tagRender","showScrollBar","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","maxCount","placeholder","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onPopupVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffix","suffixIcon","clearIcon","OptionList","animation","transitionName","popupStyle","popupClassName","popupMatchSelectWidth","popupRender","popupAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown","components","restProps","_objectWithoutProperties","_excluded","multiple","containerRef","useRef","triggerRef","listRef","focused","setFocused","useState","useImperativeHandle","_containerRef$current","_containerRef$current2","focus","current","blur","scrollTo","arg","_listRef$current","nativeElement","mergedComponents","mergedSearchValue","useMemo","_displayValues$","val","value","String","customizeInputElement","emptyListContent","mergedOpen","triggerOpen","nextOpen","tokenWithEnter","some","tokenSeparator","includes","onInternalSearch","searchText","fromTyping","isCompositing","ret","newSearchText","separatedList","undefined","patchLabels","onInternalSearchSubmit","trim","useEffect","getClearLock","setClearLock","keyLockRef","onInternalKeyDown","event","clearLock","isEnterKey","preventDefault","cloneDisplayValues","removedDisplayValue","splice","type","values","_listRef$current2","onInternalKeyUp","_len","rest","Array","_key","_listRef$current3","onSelectorRemove","newValues","filter","onInputBlur","getSelectElements","_triggerRef$current","getPopupElement","root","onInternalFocus","onRootBlur","document","activeElement","onInternalBlur","onInternalMouseDown","_triggerRef$current2","popupElement","contains","ignoreNext","_len2","restArgs","_key2","forceUpdate","onPopupMouseEnter","onTriggerVisibleChange","newOpen","baseSelectContext","_objectSpread","toggleOpen","mergedSuffixIcon","nextSuffix","onClearMouseDown","_containerRef$current3","mergedAllowClear","clearNode","optionList","createElement","mergedClassName","concat","renderNode","onSearchSubmit","visible","empty","onPopupMouseDown","onPopupBlur","Provider","process","env","NODE_ENV","displayName"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/select/es/BaseSelect/index.js"],"sourcesContent":["function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { clsx } from 'clsx';\nimport { getDOM } from \"@rc-component/util/es/Dom/findDOMNode\";\nimport * as React from 'react';\nimport { useAllowClear } from \"../hooks/useAllowClear\";\nimport { BaseSelectContext } from \"../hooks/useBaseProps\";\nimport useLock from \"../hooks/useLock\";\nimport useSelectTriggerControl, { isInside } from \"../hooks/useSelectTriggerControl\";\nimport SelectTrigger from \"../SelectTrigger\";\nimport { getSeparatedContent, isValidCount } from \"../utils/valueUtil\";\nimport Polite from \"./Polite\";\nimport useOpen, { macroTask } from \"../hooks/useOpen\";\nimport { useEvent } from '@rc-component/util';\nimport SelectInput from \"../SelectInput\";\nimport useComponents from \"../hooks/useComponents\";\n\n/**\n * ZombieJ:\n * We are currently refactoring the semantic structure of the component. Changelog:\n * - Remove `suffixIcon` and change to `suffix`.\n * - Add `components.root` for replacing response element.\n *   - Remove `getInputElement` and `getRawInputElement` since we can use `components.input` instead.\n */\n\nexport const isMultiple = mode => mode === 'tags' || mode === 'multiple';\nconst BaseSelect = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    id,\n    prefixCls,\n    className,\n    styles,\n    classNames,\n    showSearch,\n    tagRender,\n    showScrollBar = 'optional',\n    direction,\n    omitDomProps,\n    // Value\n    displayValues,\n    onDisplayValuesChange,\n    emptyOptions,\n    notFoundContent = 'Not Found',\n    onClear,\n    maxCount,\n    placeholder,\n    // Mode\n    mode,\n    // Status\n    disabled,\n    loading,\n    // Customize Input\n    getInputElement,\n    getRawInputElement,\n    // Open\n    open,\n    defaultOpen,\n    onPopupVisibleChange,\n    // Active\n    activeValue,\n    onActiveValueChange,\n    activeDescendantId,\n    // Search\n    searchValue,\n    autoClearSearchValue,\n    onSearch,\n    onSearchSplit,\n    tokenSeparators,\n    // Icons\n    allowClear,\n    prefix,\n    suffix,\n    suffixIcon,\n    clearIcon,\n    // Dropdown\n    OptionList,\n    animation,\n    transitionName,\n    popupStyle,\n    popupClassName,\n    popupMatchSelectWidth,\n    popupRender,\n    popupAlign,\n    placement,\n    builtinPlacements,\n    getPopupContainer,\n    // Focus\n    showAction = [],\n    onFocus,\n    onBlur,\n    // Rest Events\n    onKeyUp,\n    onKeyDown,\n    onMouseDown,\n    // Components\n    components,\n    // Rest Props\n    ...restProps\n  } = props;\n\n  // ============================== MISC ==============================\n  const multiple = isMultiple(mode);\n\n  // ============================== Refs ==============================\n  const containerRef = React.useRef(null);\n  const triggerRef = React.useRef(null);\n  const listRef = React.useRef(null);\n\n  /** Used for component focused management */\n  const [focused, setFocused] = React.useState(false);\n\n  // =========================== Imperative ===========================\n  React.useImperativeHandle(ref, () => ({\n    focus: containerRef.current?.focus,\n    blur: containerRef.current?.blur,\n    scrollTo: arg => listRef.current?.scrollTo(arg),\n    nativeElement: getDOM(containerRef.current)\n  }));\n\n  // =========================== Components ===========================\n  const mergedComponents = useComponents(components, getInputElement, getRawInputElement);\n\n  // ========================== Search Value ==========================\n  const mergedSearchValue = React.useMemo(() => {\n    if (mode !== 'combobox') {\n      return searchValue;\n    }\n    const val = displayValues[0]?.value;\n    return typeof val === 'string' || typeof val === 'number' ? String(val) : '';\n  }, [searchValue, mode, displayValues]);\n\n  // ========================== Custom Input ==========================\n  // Only works in `combobox`\n  const customizeInputElement = mode === 'combobox' && typeof getInputElement === 'function' && getInputElement() || null;\n\n  // ============================== Open ==============================\n  // Not trigger `open` when `notFoundContent` is empty\n  const emptyListContent = !notFoundContent && emptyOptions;\n  const [mergedOpen, triggerOpen] = useOpen(open, onPopupVisibleChange, nextOpen => disabled || emptyListContent ? false : nextOpen);\n\n  // ============================= Search =============================\n  const tokenWithEnter = React.useMemo(() => (tokenSeparators || []).some(tokenSeparator => ['\\n', '\\r\\n'].includes(tokenSeparator)), [tokenSeparators]);\n  const onInternalSearch = (searchText, fromTyping, isCompositing) => {\n    if (multiple && isValidCount(maxCount) && displayValues.length >= maxCount) {\n      return;\n    }\n    let ret = true;\n    let newSearchText = searchText;\n    onActiveValueChange?.(null);\n    const separatedList = getSeparatedContent(searchText, tokenSeparators, isValidCount(maxCount) ? maxCount - displayValues.length : undefined);\n\n    // Check if match the `tokenSeparators`\n    const patchLabels = isCompositing ? null : separatedList;\n\n    // Ignore combobox since it's not split-able\n    if (mode !== 'combobox' && patchLabels) {\n      newSearchText = '';\n      onSearchSplit?.(patchLabels);\n\n      // Should close when paste finish\n      triggerOpen(false);\n\n      // Tell Selector that break next actions\n      ret = false;\n    }\n    if (onSearch && mergedSearchValue !== newSearchText) {\n      onSearch(newSearchText, {\n        source: fromTyping ? 'typing' : 'effect'\n      });\n    }\n\n    // Open if from typing\n    if (searchText && fromTyping && ret) {\n      triggerOpen(true);\n    }\n    return ret;\n  };\n\n  // Only triggered when menu is closed & mode is tags\n  // If menu is open, OptionList will take charge\n  // If mode isn't tags, press enter is not meaningful when you can't see any option\n  const onInternalSearchSubmit = searchText => {\n    // prevent empty tags from appearing when you click the Enter button\n    if (!searchText || !searchText.trim()) {\n      return;\n    }\n    onSearch(searchText, {\n      source: 'submit'\n    });\n  };\n\n  // Close will clean up single mode search text\n  React.useEffect(() => {\n    if (!mergedOpen && !multiple && mode !== 'combobox') {\n      onInternalSearch('', false, false);\n    }\n  }, [mergedOpen]);\n\n  // ============================ Disabled ============================\n  // Close dropdown & remove focus state when disabled change\n  React.useEffect(() => {\n    // After onBlur is triggered, the focused does not need to be reset\n    if (disabled) {\n      triggerOpen(false);\n      setFocused(false);\n    }\n  }, [disabled, mergedOpen]);\n\n  // ============================ Keyboard ============================\n  /**\n   * We record input value here to check if can press to clean up by backspace\n   * - null: Key is not down, this is reset by key up\n   * - true: Search text is empty when first time backspace down\n   * - false: Search text is not empty when first time backspace down\n   */\n  const [getClearLock, setClearLock] = useLock();\n  const keyLockRef = React.useRef(false);\n\n  // KeyDown\n  const onInternalKeyDown = event => {\n    const clearLock = getClearLock();\n    const {\n      key\n    } = event;\n    const isEnterKey = key === 'Enter';\n    if (isEnterKey) {\n      // Do not submit form when type in the input\n      if (mode !== 'combobox') {\n        event.preventDefault();\n      }\n\n      // We only manage open state here, close logic should handle by list component\n      if (!mergedOpen) {\n        triggerOpen(true);\n      }\n    }\n    setClearLock(!!mergedSearchValue);\n\n    // Remove value by `backspace`\n    if (key === 'Backspace' && !clearLock && multiple && !mergedSearchValue && displayValues.length) {\n      const cloneDisplayValues = [...displayValues];\n      let removedDisplayValue = null;\n      for (let i = cloneDisplayValues.length - 1; i >= 0; i -= 1) {\n        const current = cloneDisplayValues[i];\n        if (!current.disabled) {\n          cloneDisplayValues.splice(i, 1);\n          removedDisplayValue = current;\n          break;\n        }\n      }\n      if (removedDisplayValue) {\n        onDisplayValuesChange(cloneDisplayValues, {\n          type: 'remove',\n          values: [removedDisplayValue]\n        });\n      }\n    }\n    if (mergedOpen && (!isEnterKey || !keyLockRef.current)) {\n      // Lock the Enter key after it is pressed to avoid repeated triggering of the onChange event.\n      if (isEnterKey) {\n        keyLockRef.current = true;\n      }\n      listRef.current?.onKeyDown(event);\n    }\n    onKeyDown?.(event);\n  };\n\n  // KeyUp\n  const onInternalKeyUp = (event, ...rest) => {\n    if (mergedOpen) {\n      listRef.current?.onKeyUp(event, ...rest);\n    }\n    if (event.key === 'Enter') {\n      keyLockRef.current = false;\n    }\n    onKeyUp?.(event, ...rest);\n  };\n\n  // ============================ Selector ============================\n  const onSelectorRemove = useEvent(val => {\n    const newValues = displayValues.filter(i => i !== val);\n    onDisplayValuesChange(newValues, {\n      type: 'remove',\n      values: [val]\n    });\n  });\n  const onInputBlur = () => {\n    // Unlock the Enter key after the input blur; otherwise, the Enter key needs to be pressed twice to trigger the correct effect.\n    keyLockRef.current = false;\n  };\n\n  // ========================== Focus / Blur ==========================\n  const getSelectElements = () => [getDOM(containerRef.current), triggerRef.current?.getPopupElement()];\n\n  // Close when click on non-select element\n  useSelectTriggerControl(getSelectElements, mergedOpen, triggerOpen, !!mergedComponents.root);\n\n  // ========================== Focus / Blur ==========================\n  /** Record real focus status */\n  // const focusRef = React.useRef<boolean>(false);\n\n  const onInternalFocus = event => {\n    setFocused(true);\n    if (!disabled) {\n      // `showAction` should handle `focus` if set\n      if (showAction.includes('focus')) {\n        triggerOpen(true);\n      }\n      onFocus?.(event);\n    }\n  };\n  const onRootBlur = () => {\n    macroTask(() => {\n      if (!isInside(getSelectElements(), document.activeElement)) {\n        triggerOpen(false);\n      }\n    });\n  };\n  const onInternalBlur = event => {\n    setFocused(false);\n    if (mergedSearchValue) {\n      // `tags` mode should move `searchValue` into values\n      if (mode === 'tags') {\n        onSearch(mergedSearchValue, {\n          source: 'submit'\n        });\n      } else if (mode === 'multiple') {\n        // `multiple` mode only clean the search value but not trigger event\n        onSearch('', {\n          source: 'blur'\n        });\n      }\n    }\n    onRootBlur();\n    if (!disabled) {\n      onBlur?.(event);\n    }\n  };\n  const onInternalMouseDown = (event, ...restArgs) => {\n    const {\n      target\n    } = event;\n    const popupElement = triggerRef.current?.getPopupElement();\n\n    // We should give focus back to selector if clicked item is not focusable\n    if (popupElement?.contains(target) && triggerOpen) {\n      // Tell `open` not to close since it's safe in the popup\n      triggerOpen(true, {\n        ignoreNext: true\n      });\n    }\n    onMouseDown?.(event, ...restArgs);\n  };\n\n  // ============================ Dropdown ============================\n  const [, forceUpdate] = React.useState({});\n  // We need force update here since popup dom is render async\n  function onPopupMouseEnter() {\n    forceUpdate({});\n  }\n\n  // Used for raw custom input trigger\n  let onTriggerVisibleChange;\n  if (!!mergedComponents.root) {\n    onTriggerVisibleChange = newOpen => {\n      triggerOpen(newOpen);\n    };\n  }\n\n  // ============================ Context =============================\n  const baseSelectContext = React.useMemo(() => ({\n    ...props,\n    notFoundContent,\n    open: mergedOpen,\n    triggerOpen: mergedOpen,\n    id,\n    showSearch,\n    multiple,\n    toggleOpen: triggerOpen,\n    showScrollBar,\n    styles,\n    classNames\n  }), [props, notFoundContent, triggerOpen, id, showSearch, multiple, mergedOpen, showScrollBar, styles, classNames]);\n\n  // ==================================================================\n  // ==                            Render                            ==\n  // ==================================================================\n\n  // ============================= Suffix =============================\n  const mergedSuffixIcon = React.useMemo(() => {\n    const nextSuffix = suffix ?? suffixIcon;\n    if (typeof nextSuffix === 'function') {\n      return nextSuffix({\n        searchValue: mergedSearchValue,\n        open: mergedOpen,\n        focused,\n        showSearch,\n        loading\n      });\n    }\n    return nextSuffix;\n  }, [suffix, suffixIcon, mergedSearchValue, mergedOpen, focused, showSearch, loading]);\n\n  // ============================= Clear ==============================\n  const onClearMouseDown = () => {\n    onClear?.();\n    containerRef.current?.focus();\n    onDisplayValuesChange([], {\n      type: 'clear',\n      values: displayValues\n    });\n    onInternalSearch('', false, false);\n  };\n  const {\n    allowClear: mergedAllowClear,\n    clearIcon: clearNode\n  } = useAllowClear(prefixCls, displayValues, allowClear, clearIcon, disabled, mergedSearchValue, mode);\n\n  // =========================== OptionList ===========================\n  const optionList = /*#__PURE__*/React.createElement(OptionList, {\n    ref: listRef\n  });\n\n  // ============================= Select =============================\n  const mergedClassName = clsx(prefixCls, className, {\n    [`${prefixCls}-focused`]: focused,\n    [`${prefixCls}-multiple`]: multiple,\n    [`${prefixCls}-single`]: !multiple,\n    [`${prefixCls}-allow-clear`]: mergedAllowClear,\n    [`${prefixCls}-show-arrow`]: mergedSuffixIcon !== undefined && mergedSuffixIcon !== null,\n    [`${prefixCls}-disabled`]: disabled,\n    [`${prefixCls}-loading`]: loading,\n    [`${prefixCls}-open`]: mergedOpen,\n    [`${prefixCls}-customize-input`]: customizeInputElement,\n    [`${prefixCls}-show-search`]: showSearch\n  });\n\n  // >>> Render\n  let renderNode = /*#__PURE__*/React.createElement(SelectInput, _extends({}, restProps, {\n    // Ref\n    ref: containerRef\n    // Style\n    ,\n    prefixCls: prefixCls,\n    className: mergedClassName\n    // Focus state\n    ,\n    focused: focused\n    // UI\n    ,\n    prefix: prefix,\n    suffix: mergedSuffixIcon,\n    clearIcon: clearNode\n    // Type or mode\n    ,\n    multiple: multiple,\n    mode: mode\n    // Values\n    ,\n    displayValues: displayValues,\n    placeholder: placeholder,\n    searchValue: mergedSearchValue,\n    activeValue: activeValue,\n    onSearch: onInternalSearch,\n    onSearchSubmit: onInternalSearchSubmit,\n    onInputBlur: onInputBlur,\n    onFocus: onInternalFocus,\n    onBlur: onInternalBlur,\n    onClearMouseDown: onClearMouseDown,\n    onKeyDown: onInternalKeyDown,\n    onKeyUp: onInternalKeyUp,\n    onSelectorRemove: onSelectorRemove\n    // Token handling\n    ,\n    tokenWithEnter: tokenWithEnter\n    // Open\n    ,\n    onMouseDown: onInternalMouseDown\n    // Components\n    ,\n    components: mergedComponents\n  }));\n  renderNode = /*#__PURE__*/React.createElement(SelectTrigger, {\n    ref: triggerRef,\n    disabled: disabled,\n    prefixCls: prefixCls,\n    visible: mergedOpen,\n    popupElement: optionList,\n    animation: animation,\n    transitionName: transitionName,\n    popupStyle: popupStyle,\n    popupClassName: popupClassName,\n    direction: direction,\n    popupMatchSelectWidth: popupMatchSelectWidth,\n    popupRender: popupRender,\n    popupAlign: popupAlign,\n    placement: placement,\n    builtinPlacements: builtinPlacements,\n    getPopupContainer: getPopupContainer,\n    empty: emptyOptions,\n    onPopupVisibleChange: onTriggerVisibleChange,\n    onPopupMouseEnter: onPopupMouseEnter,\n    onPopupMouseDown: onInternalMouseDown,\n    onPopupBlur: onRootBlur\n  }, renderNode);\n  return /*#__PURE__*/React.createElement(BaseSelectContext.Provider, {\n    value: baseSelectContext\n  }, /*#__PURE__*/React.createElement(Polite, {\n    visible: focused && !mergedOpen,\n    values: displayValues\n  }), renderNode);\n});\n\n// Set display name for dev\nif (process.env.NODE_ENV !== 'production') {\n  BaseSelect.displayName = 'BaseSelect';\n}\nexport default BaseSelect;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
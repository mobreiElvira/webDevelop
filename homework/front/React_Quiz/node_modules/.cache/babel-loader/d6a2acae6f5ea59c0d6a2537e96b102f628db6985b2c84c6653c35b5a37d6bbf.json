{"ast":null,"code":"import * as React from 'react';\nimport classNames from 'classnames';\nimport { useEvent } from '@rc-component/util';\nexport default function useDrag(options) {\n  const {\n    prefixCls,\n    direction,\n    className,\n    style,\n    maxSize,\n    containerRef,\n    currentSize,\n    onResize,\n    onResizeEnd,\n    onResizeStart\n  } = options;\n  const [isDragging, setIsDragging] = React.useState(false);\n  const [startPos, setStartPos] = React.useState(0);\n  const [startSize, setStartSize] = React.useState(0);\n  const isHorizontal = direction === 'left' || direction === 'right';\n  const handleMouseDown = useEvent(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n    if (isHorizontal) {\n      setStartPos(e.clientX);\n    } else {\n      setStartPos(e.clientY);\n    }\n\n    // Use provided currentSize, or fallback to container size\n    let startSize;\n    if (typeof currentSize === 'number') {\n      startSize = currentSize;\n    } else if (containerRef !== null && containerRef !== void 0 && containerRef.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      startSize = isHorizontal ? rect.width : rect.height;\n    }\n    setStartSize(startSize);\n    onResizeStart === null || onResizeStart === void 0 || onResizeStart(startSize);\n  });\n  const handleMouseMove = useEvent(e => {\n    if (!isDragging) return;\n    const currentPos = isHorizontal ? e.clientX : e.clientY;\n    let delta = currentPos - startPos;\n\n    // Adjust delta direction based on placement\n    if (direction === 'right' || direction === 'bottom') {\n      delta = -delta;\n    }\n    let newSize = startSize + delta;\n\n    // Apply min/max size limits\n    if (newSize < 0) {\n      newSize = 0;\n    }\n    // Only apply maxSize if it's a valid positive number\n    if (maxSize && newSize > maxSize) {\n      newSize = maxSize;\n    }\n    onResize === null || onResize === void 0 || onResize(newSize);\n  });\n  const handleMouseUp = React.useCallback(() => {\n    if (isDragging) {\n      setIsDragging(false);\n\n      // Get the final size after resize\n      if (containerRef !== null && containerRef !== void 0 && containerRef.current) {\n        const rect = containerRef.current.getBoundingClientRect();\n        const finalSize = isHorizontal ? rect.width : rect.height;\n        onResizeEnd === null || onResizeEnd === void 0 || onResizeEnd(finalSize);\n      }\n    }\n  }, [isDragging, containerRef, onResizeEnd, isHorizontal]);\n  React.useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n  const dragElementClassName = classNames(\"\".concat(prefixCls, \"-dragger\"), \"\".concat(prefixCls, \"-dragger-\").concat(direction), {\n    [\"\".concat(prefixCls, \"-dragger-dragging\")]: isDragging,\n    [\"\".concat(prefixCls, \"-dragger-horizontal\")]: isHorizontal,\n    [\"\".concat(prefixCls, \"-dragger-vertical\")]: !isHorizontal\n  }, className);\n  return {\n    dragElementProps: {\n      className: dragElementClassName,\n      style,\n      onMouseDown: handleMouseDown\n    },\n    isDragging\n  };\n}","map":{"version":3,"names":["React","classNames","useEvent","useDrag","options","prefixCls","direction","className","style","maxSize","containerRef","currentSize","onResize","onResizeEnd","onResizeStart","isDragging","setIsDragging","useState","startPos","setStartPos","startSize","setStartSize","isHorizontal","handleMouseDown","e","preventDefault","stopPropagation","clientX","clientY","current","rect","getBoundingClientRect","width","height","handleMouseMove","currentPos","delta","newSize","handleMouseUp","useCallback","finalSize","useEffect","document","addEventListener","removeEventListener","dragElementClassName","concat","dragElementProps","onMouseDown"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/drawer/es/hooks/useDrag.js"],"sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport { useEvent } from '@rc-component/util';\nexport default function useDrag(options) {\n  const {\n    prefixCls,\n    direction,\n    className,\n    style,\n    maxSize,\n    containerRef,\n    currentSize,\n    onResize,\n    onResizeEnd,\n    onResizeStart\n  } = options;\n  const [isDragging, setIsDragging] = React.useState(false);\n  const [startPos, setStartPos] = React.useState(0);\n  const [startSize, setStartSize] = React.useState(0);\n  const isHorizontal = direction === 'left' || direction === 'right';\n  const handleMouseDown = useEvent(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n    if (isHorizontal) {\n      setStartPos(e.clientX);\n    } else {\n      setStartPos(e.clientY);\n    }\n\n    // Use provided currentSize, or fallback to container size\n    let startSize;\n    if (typeof currentSize === 'number') {\n      startSize = currentSize;\n    } else if (containerRef?.current) {\n      const rect = containerRef.current.getBoundingClientRect();\n      startSize = isHorizontal ? rect.width : rect.height;\n    }\n    setStartSize(startSize);\n    onResizeStart?.(startSize);\n  });\n  const handleMouseMove = useEvent(e => {\n    if (!isDragging) return;\n    const currentPos = isHorizontal ? e.clientX : e.clientY;\n    let delta = currentPos - startPos;\n\n    // Adjust delta direction based on placement\n    if (direction === 'right' || direction === 'bottom') {\n      delta = -delta;\n    }\n    let newSize = startSize + delta;\n\n    // Apply min/max size limits\n    if (newSize < 0) {\n      newSize = 0;\n    }\n    // Only apply maxSize if it's a valid positive number\n    if (maxSize && newSize > maxSize) {\n      newSize = maxSize;\n    }\n    onResize?.(newSize);\n  });\n  const handleMouseUp = React.useCallback(() => {\n    if (isDragging) {\n      setIsDragging(false);\n\n      // Get the final size after resize\n      if (containerRef?.current) {\n        const rect = containerRef.current.getBoundingClientRect();\n        const finalSize = isHorizontal ? rect.width : rect.height;\n        onResizeEnd?.(finalSize);\n      }\n    }\n  }, [isDragging, containerRef, onResizeEnd, isHorizontal]);\n  React.useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n  const dragElementClassName = classNames(`${prefixCls}-dragger`, `${prefixCls}-dragger-${direction}`, {\n    [`${prefixCls}-dragger-dragging`]: isDragging,\n    [`${prefixCls}-dragger-horizontal`]: isHorizontal,\n    [`${prefixCls}-dragger-vertical`]: !isHorizontal\n  }, className);\n  return {\n    dragElementProps: {\n      className: dragElementClassName,\n      style,\n      onMouseDown: handleMouseDown\n    },\n    isDragging\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
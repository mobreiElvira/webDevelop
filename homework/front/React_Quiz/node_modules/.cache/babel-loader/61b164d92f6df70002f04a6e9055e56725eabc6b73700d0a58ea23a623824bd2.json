{"ast":null,"code":"// https://github.com/ant-design/ant-design/issues/50080\nconst traverseFileTree = async (files, isAccepted) => {\n  const flattenFileList = [];\n  const progressFileList = [];\n  files.forEach(file => progressFileList.push(file.webkitGetAsEntry()));\n  async function readDirectory(directory) {\n    const dirReader = directory.createReader();\n    const entries = [];\n    while (true) {\n      const results = await new Promise(resolve => {\n        dirReader.readEntries(resolve, () => resolve([]));\n      });\n      const n = results.length;\n      if (!n) {\n        break;\n      }\n      for (let i = 0; i < n; i++) {\n        entries.push(results[i]);\n      }\n    }\n    return entries;\n  }\n  async function readFile(item) {\n    return new Promise(reslove => {\n      item.file(file => {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            // eslint-disable-next-line no-param-reassign\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n          reslove(file);\n        } else {\n          reslove(null);\n        }\n      });\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const _traverseFileTree = async (item, path) => {\n    if (!item) {\n      return;\n    }\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n    if (item.isFile) {\n      const file = await readFile(item);\n      if (file) {\n        flattenFileList.push(file);\n      }\n    } else if (item.isDirectory) {\n      const entries = await readDirectory(item);\n      progressFileList.push(...entries);\n    }\n  };\n  let wipIndex = 0;\n  while (wipIndex < progressFileList.length) {\n    await _traverseFileTree(progressFileList[wipIndex]);\n    wipIndex++;\n  }\n  return flattenFileList;\n};\nexport default traverseFileTree;","map":{"version":3,"names":["traverseFileTree","files","isAccepted","flattenFileList","progressFileList","forEach","file","push","webkitGetAsEntry","readDirectory","directory","dirReader","createReader","entries","results","Promise","resolve","readEntries","n","length","i","readFile","item","reslove","fullPath","webkitRelativePath","Object","defineProperties","writable","replace","_traverseFileTree","path","isFile","isDirectory","wipIndex"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/upload/es/traverseFileTree.js"],"sourcesContent":["// https://github.com/ant-design/ant-design/issues/50080\nconst traverseFileTree = async (files, isAccepted) => {\n  const flattenFileList = [];\n  const progressFileList = [];\n  files.forEach(file => progressFileList.push(file.webkitGetAsEntry()));\n  async function readDirectory(directory) {\n    const dirReader = directory.createReader();\n    const entries = [];\n    while (true) {\n      const results = await new Promise(resolve => {\n        dirReader.readEntries(resolve, () => resolve([]));\n      });\n      const n = results.length;\n      if (!n) {\n        break;\n      }\n      for (let i = 0; i < n; i++) {\n        entries.push(results[i]);\n      }\n    }\n    return entries;\n  }\n  async function readFile(item) {\n    return new Promise(reslove => {\n      item.file(file => {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            });\n            // eslint-disable-next-line no-param-reassign\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n          reslove(file);\n        } else {\n          reslove(null);\n        }\n      });\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const _traverseFileTree = async (item, path) => {\n    if (!item) {\n      return;\n    }\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n    if (item.isFile) {\n      const file = await readFile(item);\n      if (file) {\n        flattenFileList.push(file);\n      }\n    } else if (item.isDirectory) {\n      const entries = await readDirectory(item);\n      progressFileList.push(...entries);\n    }\n  };\n  let wipIndex = 0;\n  while (wipIndex < progressFileList.length) {\n    await _traverseFileTree(progressFileList[wipIndex]);\n    wipIndex++;\n  }\n  return flattenFileList;\n};\nexport default traverseFileTree;"],"mappings":"AAAA;AACA,MAAMA,gBAAgB,GAAG,MAAAA,CAAOC,KAAK,EAAEC,UAAU,KAAK;EACpD,MAAMC,eAAe,GAAG,EAAE;EAC1B,MAAMC,gBAAgB,GAAG,EAAE;EAC3BH,KAAK,CAACI,OAAO,CAACC,IAAI,IAAIF,gBAAgB,CAACG,IAAI,CAACD,IAAI,CAACE,gBAAgB,CAAC,CAAC,CAAC,CAAC;EACrE,eAAeC,aAAaA,CAACC,SAAS,EAAE;IACtC,MAAMC,SAAS,GAAGD,SAAS,CAACE,YAAY,CAAC,CAAC;IAC1C,MAAMC,OAAO,GAAG,EAAE;IAClB,OAAO,IAAI,EAAE;MACX,MAAMC,OAAO,GAAG,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAI;QAC3CL,SAAS,CAACM,WAAW,CAACD,OAAO,EAAE,MAAMA,OAAO,CAAC,EAAE,CAAC,CAAC;MACnD,CAAC,CAAC;MACF,MAAME,CAAC,GAAGJ,OAAO,CAACK,MAAM;MACxB,IAAI,CAACD,CAAC,EAAE;QACN;MACF;MACA,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,EAAEE,CAAC,EAAE,EAAE;QAC1BP,OAAO,CAACN,IAAI,CAACO,OAAO,CAACM,CAAC,CAAC,CAAC;MAC1B;IACF;IACA,OAAOP,OAAO;EAChB;EACA,eAAeQ,QAAQA,CAACC,IAAI,EAAE;IAC5B,OAAO,IAAIP,OAAO,CAACQ,OAAO,IAAI;MAC5BD,IAAI,CAAChB,IAAI,CAACA,IAAI,IAAI;QAChB,IAAIJ,UAAU,CAACI,IAAI,CAAC,EAAE;UACpB;UACA,IAAIgB,IAAI,CAACE,QAAQ,IAAI,CAAClB,IAAI,CAACmB,kBAAkB,EAAE;YAC7CC,MAAM,CAACC,gBAAgB,CAACrB,IAAI,EAAE;cAC5BmB,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;YACF;YACAtB,IAAI,CAACmB,kBAAkB,GAAGH,IAAI,CAACE,QAAQ,CAACK,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;YAC1DH,MAAM,CAACC,gBAAgB,CAACrB,IAAI,EAAE;cAC5BmB,kBAAkB,EAAE;gBAClBG,QAAQ,EAAE;cACZ;YACF,CAAC,CAAC;UACJ;UACAL,OAAO,CAACjB,IAAI,CAAC;QACf,CAAC,MAAM;UACLiB,OAAO,CAAC,IAAI,CAAC;QACf;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;EAEA;EACA,MAAMO,iBAAiB,GAAG,MAAAA,CAAOR,IAAI,EAAES,IAAI,KAAK;IAC9C,IAAI,CAACT,IAAI,EAAE;MACT;IACF;IACA;IACAA,IAAI,CAACS,IAAI,GAAGA,IAAI,IAAI,EAAE;IACtB,IAAIT,IAAI,CAACU,MAAM,EAAE;MACf,MAAM1B,IAAI,GAAG,MAAMe,QAAQ,CAACC,IAAI,CAAC;MACjC,IAAIhB,IAAI,EAAE;QACRH,eAAe,CAACI,IAAI,CAACD,IAAI,CAAC;MAC5B;IACF,CAAC,MAAM,IAAIgB,IAAI,CAACW,WAAW,EAAE;MAC3B,MAAMpB,OAAO,GAAG,MAAMJ,aAAa,CAACa,IAAI,CAAC;MACzClB,gBAAgB,CAACG,IAAI,CAAC,GAAGM,OAAO,CAAC;IACnC;EACF,CAAC;EACD,IAAIqB,QAAQ,GAAG,CAAC;EAChB,OAAOA,QAAQ,GAAG9B,gBAAgB,CAACe,MAAM,EAAE;IACzC,MAAMW,iBAAiB,CAAC1B,gBAAgB,CAAC8B,QAAQ,CAAC,CAAC;IACnDA,QAAQ,EAAE;EACZ;EACA,OAAO/B,eAAe;AACxB,CAAC;AACD,eAAeH,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
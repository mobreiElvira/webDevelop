{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nfunction getPosition(e) {\n  const obj = 'touches' in e ? e.touches[0] : e;\n  const scrollXOffset = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset;\n  const scrollYOffset = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;\n  return {\n    pageX: obj.pageX - scrollXOffset,\n    pageY: obj.pageY - scrollYOffset\n  };\n}\nfunction useColorDrag(props) {\n  const {\n    targetRef,\n    containerRef,\n    direction,\n    onDragChange,\n    onDragChangeComplete,\n    calculate,\n    color,\n    disabledDrag\n  } = props;\n  const [offsetValue, setOffsetValue] = useState({\n    x: 0,\n    y: 0\n  });\n  const mouseMoveRef = useRef(null);\n  const mouseUpRef = useRef(null);\n\n  // Always get position from `color`\n  useEffect(() => {\n    setOffsetValue(calculate());\n  }, [color]);\n  useEffect(() => () => {\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n  }, []);\n  const updateOffset = e => {\n    const {\n      pageX,\n      pageY\n    } = getPosition(e);\n    const {\n      x: rectX,\n      y: rectY,\n      width,\n      height\n    } = containerRef.current.getBoundingClientRect();\n    const {\n      width: targetWidth,\n      height: targetHeight\n    } = targetRef.current.getBoundingClientRect();\n    const centerOffsetX = targetWidth / 2;\n    const centerOffsetY = targetHeight / 2;\n    const offsetX = Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n    const offsetY = Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n    const calcOffset = {\n      x: offsetX,\n      y: direction === 'x' ? offsetValue.y : offsetY\n    };\n\n    // Exclusion of boundary cases\n    if (targetWidth === 0 && targetHeight === 0 || targetWidth !== targetHeight) {\n      return false;\n    }\n    onDragChange === null || onDragChange === void 0 || onDragChange(calcOffset);\n  };\n  const onDragMove = e => {\n    e.preventDefault();\n    updateOffset(e);\n  };\n  const onDragStop = e => {\n    e.preventDefault();\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n    onDragChangeComplete === null || onDragChangeComplete === void 0 || onDragChangeComplete();\n  };\n  const onDragStart = e => {\n    // https://github.com/ant-design/ant-design/issues/43529\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    if (disabledDrag) {\n      return;\n    }\n    updateOffset(e);\n    document.addEventListener('mousemove', onDragMove);\n    document.addEventListener('mouseup', onDragStop);\n    document.addEventListener('touchmove', onDragMove);\n    document.addEventListener('touchend', onDragStop);\n    mouseMoveRef.current = onDragMove;\n    mouseUpRef.current = onDragStop;\n  };\n  return [offsetValue, onDragStart];\n}\nexport default useColorDrag;","map":{"version":3,"names":["useEffect","useRef","useState","getPosition","e","obj","touches","scrollXOffset","document","documentElement","scrollLeft","body","window","pageXOffset","scrollYOffset","scrollTop","pageYOffset","pageX","pageY","useColorDrag","props","targetRef","containerRef","direction","onDragChange","onDragChangeComplete","calculate","color","disabledDrag","offsetValue","setOffsetValue","x","y","mouseMoveRef","mouseUpRef","removeEventListener","current","updateOffset","rectX","rectY","width","height","getBoundingClientRect","targetWidth","targetHeight","centerOffsetX","centerOffsetY","offsetX","Math","max","min","offsetY","calcOffset","onDragMove","preventDefault","onDragStop","onDragStart","addEventListener"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/color-picker/es/hooks/useColorDrag.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nfunction getPosition(e) {\n  const obj = 'touches' in e ? e.touches[0] : e;\n  const scrollXOffset = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset;\n  const scrollYOffset = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;\n  return {\n    pageX: obj.pageX - scrollXOffset,\n    pageY: obj.pageY - scrollYOffset\n  };\n}\nfunction useColorDrag(props) {\n  const {\n    targetRef,\n    containerRef,\n    direction,\n    onDragChange,\n    onDragChangeComplete,\n    calculate,\n    color,\n    disabledDrag\n  } = props;\n  const [offsetValue, setOffsetValue] = useState({\n    x: 0,\n    y: 0\n  });\n  const mouseMoveRef = useRef(null);\n  const mouseUpRef = useRef(null);\n\n  // Always get position from `color`\n  useEffect(() => {\n    setOffsetValue(calculate());\n  }, [color]);\n  useEffect(() => () => {\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n  }, []);\n  const updateOffset = e => {\n    const {\n      pageX,\n      pageY\n    } = getPosition(e);\n    const {\n      x: rectX,\n      y: rectY,\n      width,\n      height\n    } = containerRef.current.getBoundingClientRect();\n    const {\n      width: targetWidth,\n      height: targetHeight\n    } = targetRef.current.getBoundingClientRect();\n    const centerOffsetX = targetWidth / 2;\n    const centerOffsetY = targetHeight / 2;\n    const offsetX = Math.max(0, Math.min(pageX - rectX, width)) - centerOffsetX;\n    const offsetY = Math.max(0, Math.min(pageY - rectY, height)) - centerOffsetY;\n    const calcOffset = {\n      x: offsetX,\n      y: direction === 'x' ? offsetValue.y : offsetY\n    };\n\n    // Exclusion of boundary cases\n    if (targetWidth === 0 && targetHeight === 0 || targetWidth !== targetHeight) {\n      return false;\n    }\n    onDragChange?.(calcOffset);\n  };\n  const onDragMove = e => {\n    e.preventDefault();\n    updateOffset(e);\n  };\n  const onDragStop = e => {\n    e.preventDefault();\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    document.removeEventListener('touchmove', mouseMoveRef.current);\n    document.removeEventListener('touchend', mouseUpRef.current);\n    mouseMoveRef.current = null;\n    mouseUpRef.current = null;\n    onDragChangeComplete?.();\n  };\n  const onDragStart = e => {\n    // https://github.com/ant-design/ant-design/issues/43529\n    document.removeEventListener('mousemove', mouseMoveRef.current);\n    document.removeEventListener('mouseup', mouseUpRef.current);\n    if (disabledDrag) {\n      return;\n    }\n    updateOffset(e);\n    document.addEventListener('mousemove', onDragMove);\n    document.addEventListener('mouseup', onDragStop);\n    document.addEventListener('touchmove', onDragMove);\n    document.addEventListener('touchend', onDragStop);\n    mouseMoveRef.current = onDragMove;\n    mouseUpRef.current = onDragStop;\n  };\n  return [offsetValue, onDragStart];\n}\nexport default useColorDrag;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
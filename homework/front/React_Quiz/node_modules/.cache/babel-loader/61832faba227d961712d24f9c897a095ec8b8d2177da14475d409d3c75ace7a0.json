{"ast":null,"code":"import _objectSpread from \"F:/\\u7EFC\\u5408/\\u4E2A\\u4EBA/\\u4F5C\\u4E1A/\\u4E3B\\u8BFE/\\u5927\\u4E09/web\\u5F00\\u53D1/homework/front/React_Quiz/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport * as React from 'react';\nimport { toArray } from \"../utils/commonUtil\";\nimport { injectPropsWithOption } from \"../utils/valueUtil\";\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default (options, fieldNames, searchValue, filterOption, optionFilterProp) => React.useMemo(() => {\n  if (!searchValue || filterOption === false) {\n    return options;\n  }\n  const {\n    options: fieldOptions,\n    label: fieldLabel,\n    value: fieldValue\n  } = fieldNames;\n  const filteredOptions = [];\n  const customizeFilter = typeof filterOption === 'function';\n  const upperSearch = searchValue.toUpperCase();\n  const filterFunc = customizeFilter ? filterOption : (_, option) => {\n    // Use provided `optionFilterProp`\n    if (optionFilterProp) {\n      return includes(option[optionFilterProp], upperSearch);\n    }\n\n    // Auto select `label` or `value` by option type\n    if (option[fieldOptions]) {\n      // hack `fieldLabel` since `OptionGroup` children is not `label`\n      return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n    }\n    return includes(option[fieldValue], upperSearch);\n  };\n  const wrapOption = customizeFilter ? opt => injectPropsWithOption(opt) : opt => opt;\n  options.forEach(item => {\n    // Group should check child options\n    if (item[fieldOptions]) {\n      // Check group first\n      const matchGroup = filterFunc(searchValue, wrapOption(item));\n      if (matchGroup) {\n        filteredOptions.push(item);\n      } else {\n        // Check option\n        const subOptions = item[fieldOptions].filter(subItem => filterFunc(searchValue, wrapOption(subItem)));\n        if (subOptions.length) {\n          filteredOptions.push(_objectSpread(_objectSpread({}, item), {}, {\n            [fieldOptions]: subOptions\n          }));\n        }\n      }\n      return;\n    }\n    if (filterFunc(searchValue, wrapOption(item))) {\n      filteredOptions.push(item);\n    }\n  });\n  return filteredOptions;\n}, [options, filterOption, optionFilterProp, searchValue, fieldNames]);","map":{"version":3,"names":["React","toArray","injectPropsWithOption","includes","test","search","join","toUpperCase","options","fieldNames","searchValue","filterOption","optionFilterProp","useMemo","fieldOptions","label","fieldLabel","value","fieldValue","filteredOptions","customizeFilter","upperSearch","filterFunc","_","option","wrapOption","opt","forEach","item","matchGroup","push","subOptions","filter","subItem","length","_objectSpread"],"sources":["F:/综合/个人/作业/主课/大三/web开发/homework/front/React_Quiz/node_modules/@rc-component/select/es/hooks/useFilterOptions.js"],"sourcesContent":["import * as React from 'react';\nimport { toArray } from \"../utils/commonUtil\";\nimport { injectPropsWithOption } from \"../utils/valueUtil\";\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default ((options, fieldNames, searchValue, filterOption, optionFilterProp) => React.useMemo(() => {\n  if (!searchValue || filterOption === false) {\n    return options;\n  }\n  const {\n    options: fieldOptions,\n    label: fieldLabel,\n    value: fieldValue\n  } = fieldNames;\n  const filteredOptions = [];\n  const customizeFilter = typeof filterOption === 'function';\n  const upperSearch = searchValue.toUpperCase();\n  const filterFunc = customizeFilter ? filterOption : (_, option) => {\n    // Use provided `optionFilterProp`\n    if (optionFilterProp) {\n      return includes(option[optionFilterProp], upperSearch);\n    }\n\n    // Auto select `label` or `value` by option type\n    if (option[fieldOptions]) {\n      // hack `fieldLabel` since `OptionGroup` children is not `label`\n      return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n    }\n    return includes(option[fieldValue], upperSearch);\n  };\n  const wrapOption = customizeFilter ? opt => injectPropsWithOption(opt) : opt => opt;\n  options.forEach(item => {\n    // Group should check child options\n    if (item[fieldOptions]) {\n      // Check group first\n      const matchGroup = filterFunc(searchValue, wrapOption(item));\n      if (matchGroup) {\n        filteredOptions.push(item);\n      } else {\n        // Check option\n        const subOptions = item[fieldOptions].filter(subItem => filterFunc(searchValue, wrapOption(subItem)));\n        if (subOptions.length) {\n          filteredOptions.push({\n            ...item,\n            [fieldOptions]: subOptions\n          });\n        }\n      }\n      return;\n    }\n    if (filterFunc(searchValue, wrapOption(item))) {\n      filteredOptions.push(item);\n    }\n  });\n  return filteredOptions;\n}, [options, filterOption, optionFilterProp, searchValue, fieldNames]));"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,qBAAqB,QAAQ,oBAAoB;AAC1D,SAASC,QAAQA,CAACC,IAAI,EAAEC,MAAM,EAAE;EAC9B,OAAOJ,OAAO,CAACG,IAAI,CAAC,CAACE,IAAI,CAAC,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC,CAACJ,QAAQ,CAACE,MAAM,CAAC;AAC9D;AACA,eAAgB,CAACG,OAAO,EAAEC,UAAU,EAAEC,WAAW,EAAEC,YAAY,EAAEC,gBAAgB,KAAKZ,KAAK,CAACa,OAAO,CAAC,MAAM;EACxG,IAAI,CAACH,WAAW,IAAIC,YAAY,KAAK,KAAK,EAAE;IAC1C,OAAOH,OAAO;EAChB;EACA,MAAM;IACJA,OAAO,EAAEM,YAAY;IACrBC,KAAK,EAAEC,UAAU;IACjBC,KAAK,EAAEC;EACT,CAAC,GAAGT,UAAU;EACd,MAAMU,eAAe,GAAG,EAAE;EAC1B,MAAMC,eAAe,GAAG,OAAOT,YAAY,KAAK,UAAU;EAC1D,MAAMU,WAAW,GAAGX,WAAW,CAACH,WAAW,CAAC,CAAC;EAC7C,MAAMe,UAAU,GAAGF,eAAe,GAAGT,YAAY,GAAG,CAACY,CAAC,EAAEC,MAAM,KAAK;IACjE;IACA,IAAIZ,gBAAgB,EAAE;MACpB,OAAOT,QAAQ,CAACqB,MAAM,CAACZ,gBAAgB,CAAC,EAAES,WAAW,CAAC;IACxD;;IAEA;IACA,IAAIG,MAAM,CAACV,YAAY,CAAC,EAAE;MACxB;MACA,OAAOX,QAAQ,CAACqB,MAAM,CAACR,UAAU,KAAK,UAAU,GAAGA,UAAU,GAAG,OAAO,CAAC,EAAEK,WAAW,CAAC;IACxF;IACA,OAAOlB,QAAQ,CAACqB,MAAM,CAACN,UAAU,CAAC,EAAEG,WAAW,CAAC;EAClD,CAAC;EACD,MAAMI,UAAU,GAAGL,eAAe,GAAGM,GAAG,IAAIxB,qBAAqB,CAACwB,GAAG,CAAC,GAAGA,GAAG,IAAIA,GAAG;EACnFlB,OAAO,CAACmB,OAAO,CAACC,IAAI,IAAI;IACtB;IACA,IAAIA,IAAI,CAACd,YAAY,CAAC,EAAE;MACtB;MACA,MAAMe,UAAU,GAAGP,UAAU,CAACZ,WAAW,EAAEe,UAAU,CAACG,IAAI,CAAC,CAAC;MAC5D,IAAIC,UAAU,EAAE;QACdV,eAAe,CAACW,IAAI,CAACF,IAAI,CAAC;MAC5B,CAAC,MAAM;QACL;QACA,MAAMG,UAAU,GAAGH,IAAI,CAACd,YAAY,CAAC,CAACkB,MAAM,CAACC,OAAO,IAAIX,UAAU,CAACZ,WAAW,EAAEe,UAAU,CAACQ,OAAO,CAAC,CAAC,CAAC;QACrG,IAAIF,UAAU,CAACG,MAAM,EAAE;UACrBf,eAAe,CAACW,IAAI,CAAAK,aAAA,CAAAA,aAAA,KACfP,IAAI;YACP,CAACd,YAAY,GAAGiB;UAAU,EAC3B,CAAC;QACJ;MACF;MACA;IACF;IACA,IAAIT,UAAU,CAACZ,WAAW,EAAEe,UAAU,CAACG,IAAI,CAAC,CAAC,EAAE;MAC7CT,eAAe,CAACW,IAAI,CAACF,IAAI,CAAC;IAC5B;EACF,CAAC,CAAC;EACF,OAAOT,eAAe;AACxB,CAAC,EAAE,CAACX,OAAO,EAAEG,YAAY,EAAEC,gBAAgB,EAAEF,WAAW,EAAED,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}